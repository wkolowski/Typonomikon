<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="coqdoc.css" rel="stylesheet" type="text/css">
<script type="text/javascript" src="jquery-1.8.3.js"></script>
<script type="text/javascript" src="main.js"></script>
<script type="text/javascript" src="MyStyles.js"></script>
</head>
<h1 class="libtitle">I1: Ltac â€” jÄ™zyk taktyk</h1>

<div class="code">
</div>

<div class="doc">

<div class="paragraph"> </div>

 Matematycy uwaÅ¼ajÄ…, Å¼e po osiÄ…gniÄ™ciu pewnego poziomu zaawansowania i
    obycia (nazywanego zazwyczaj "mathematical maturity") skrupulatne
    rozpisywanie kaÅ¼dego kroku dowodu przestaje mieÄ‡ sens i pozwalajÄ…
    sobie zarzuciÄ‡ je na rzecz bardziej wysokopoziomowego opisu rozumowania.

<div class="paragraph"> </div>

    MyÅ›lÄ™, Å¼e ta sytuacja ma miejsce w twoim przypadku â€” znasz juÅ¼ sporÄ…
    czÄ™Å›Ä‡ jÄ™zyka termÃ³w Coqa (zwanego Gallina) i potrafisz dowodziÄ‡ rÃ³Å¼nych
    wÅ‚aÅ›ciwoÅ›ci programÃ³w. DoszedÅ‚eÅ› do punktu, w ktÃ³rym rÄ™czne klepanie
    dowodÃ³w przestaje byÄ‡ produktywne, a staje siÄ™ nudne i mÄ™czÄ…ce.

<div class="paragraph"> </div>

    Niestety, natura dowodu formalnego nie pozwala nam od tak po prostu
    pominÄ…Ä‡ maÅ‚o ciekawych krokÃ³w. Czy chcemy czy nie, aby Coq przyjÄ…Å‚
    dowÃ³d, kroki te muszÄ… zostaÄ‡ wykonane. Wcale nie znaczy to jednak,
    Å¼e to my musimy je wykonaÄ‡ â€” mogÄ… zrobiÄ‡ to za nas programy.

<div class="paragraph"> </div>

    Te programy to oczywiÅ›cie taktyki. WiÄ™kszoÅ›Ä‡ prymitywnych taktyk, jak
    <span class="inlinecode"><span class="id" title="tactic">intro</span></span>, <span class="inlinecode"><span class="id" title="tactic">destruct</span></span>, czy <span class="inlinecode"><span class="id" title="tactic">assumption</span></span> juÅ¼ znamy. ChoÄ‡ nie wiesz o tym,
    uÅ¼ywaliÅ›my teÅ¼ wielokrotnie taktyk caÅ‚kiem zaawansowanych, takich jak
    <span class="inlinecode"><span class="id" title="tactic">induction</span></span> czy <span class="inlinecode"><span class="id" title="tactic">inversion</span></span>, bez ktÃ³rych nasze formalne Å¼ycie byÅ‚oby
    drogÄ… przez mÄ™kÄ™.

<div class="paragraph"> </div>

    Wszystkie one sÄ… jednak taktykami wbudowanymi, danymi nam z gÃ³ry przez
    Coqowych bogÃ³w i nie mamy wpÅ‚ywu na ich dziaÅ‚anie. JeÅ¼eli nie jesteÅ›my
    w stanie zrobiÄ‡ czegoÅ› za ich pomocÄ…, jesteÅ›my zgubieni. Czas najwyÅ¼szy
    nauczyÄ‡ siÄ™ pisaÄ‡ wÅ‚asne taktyki, ktÃ³re pomogÄ… nam wykonywaÄ‡ maÅ‚o ciekawe
    kroki w dowodach, a w dalszej perspektywie takÅ¼e przeprowadzaÄ‡ bardziej
    zaawansowane rozumowania zupeÅ‚nie automatycznie.

<div class="paragraph"> </div>

    W tym rozdziale poznamy podstawy jÄ™zyka <span class="inlinecode"><span class="id" title="keyword">Ltac</span></span>, ktÃ³ry sÅ‚uÅ¼y do tworzenia
    wÅ‚asnych taktyk. Jego skÅ‚adniÄ™ przedstawiono i skrupulatnie opisano tu:
    https://coq.inria.fr/refman/proof-engine/ltac.htmlsyntax

    ChoÄ‡ przykÅ‚ad znaczy wiÄ™cej niÅ¼ 0x3E8 stron manuala i postaram siÄ™
    dokÅ‚adnie zilustrowaÄ‡ kaÅ¼dy istotny moim zdaniem konstrukt jÄ™zyka
    [Ltac], to i tak polecam zapoznaÄ‡ siÄ™ z powyÅ¼szym linkiem.

    Upewnij siÄ™ teÅ¼, Å¼e rozumiesz dokÅ‚adnie, jak dziaÅ‚ajÄ… podstawowe
    kombinatory taktyk, ktÃ³re zostaÅ‚y omÃ³wione w rozdziale 1, gdyÅ¼ nie
    bÄ™dziemy omawiaÄ‡ ich drugi raz. 
<div class="paragraph"> </div>

<a name="lab450"></a><h1 class="section">ZarzÄ…dzanie celami i selektory</h1>

<div class="paragraph"> </div>

 DowodzÄ…c (lub konstruujÄ…c cokolwiek za pomocÄ… taktyk) mamy do rozwiÄ…zania
    jeden lub wiÄ™cej celÃ³w. Cele sÄ… ponumerowane i domyÅ›lnie zawsze pracujemy
    nad tym, ktÃ³ry ma numer 1.

<div class="paragraph"> </div>

    Jednak wcale nie musi tak byÄ‡ â€” moÅ¼emy zaznaczyÄ‡ inny cel i zaczÄ…Ä‡ nad
    nim pracowaÄ‡. SÅ‚uÅ¼y do tego komenda <span class="inlinecode"><span class="id" title="var">Focus</span></span>. Cel o numerze n moÅ¼emy
    zaznaczyÄ‡ komendÄ… <span class="inlinecode"><span class="id" title="var">Focus</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span>. JeÅ¼eli to zrobimy, wszystkie pozostaÅ‚e cele
    chwilowo znikajÄ…. Do stanu domyÅ›lnego, w ktÃ³rym pracujemy nad celem nr 1
    i wszystkie cele sÄ… widoczne moÅ¼emy wrÃ³ciÄ‡ za pomocÄ… komendy <span class="inlinecode"><span class="id" title="var">Unfocus</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Goal</span> <span class="id" title="keyword">forall</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">R</span> : <span class="id" title="keyword">Prop</span>, <span class="id" title="var">P</span> /\ <span class="id" title="var">Q</span> /\ <span class="id" title="var">R</span> -&gt; <span class="id" title="var">R</span> /\ <span class="id" title="var">Q</span> /\ <span class="id" title="var">P</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Focus</span> 3.<br/>
&nbsp;&nbsp;<span class="id" title="var">Unfocus</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Focus</span> 2.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
Komenda <span class="inlinecode"><span class="id" title="var">Focus</span></span> jest uÅ¼yteczna gÅ‚Ã³wnie gdy ktÃ³ryÅ› z dalszych celÃ³w jest
    Å‚atwiejszy niÅ¼ obecny. MoÅ¼emy wtedy przeÅ‚Ä…czyÄ‡ siÄ™ na niego, rozwiÄ…zaÄ‡
    go i wyniesione stÄ…d doÅ›wiadczenie przenieÅ›Ä‡ na trudniejsze cele. Jest
    wskazane, Å¼eby po zakoÅ„czeniu dowodu zrefaktoryzowaÄ‡ go tak, aby komenda
    <span class="inlinecode"><span class="id" title="var">Focus</span></span> w nim nie wystÄ™powaÅ‚a.

<div class="paragraph"> </div>

    Nie jest teÅ¼ tak, Å¼e zawsze musimy pracowaÄ‡ nad celem o numerze 1. MoÅ¼emy
    pracowaÄ‡ na dowolnym zbiorze celÃ³w. Do wybierania celÃ³w, na ktÃ³re chcemy
    zadziaÅ‚aÄ‡ taktykami, sÅ‚uÅ¼Ä… selektory. Jest ich kilka i majÄ… takÄ… skÅ‚adniÄ™:
<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="var">n</span>:</span> <span class="inlinecode"><span class="id" title="var">t</span></span> â€” uÅ¼yj taktyki t na n-tym celu. <span class="inlinecode">1:</span> <span class="inlinecode"><span class="id" title="var">t</span></span> jest rÃ³wnowaÅ¼ne <span class="inlinecode"><span class="id" title="var">t</span></span>.

</li>
<li> <span class="inlinecode"><span class="id" title="var">a</span>-<span class="id" title="var">b</span>:</span> <span class="inlinecode"><span class="id" title="var">t</span></span> â€” uÅ¼yj taktyki t na wszystkich celach o numerach od a do b

</li>
<li> <span class="inlinecode"><span class="id" title="var">a_1</span>-<span class="id" title="var">b_1</span>,</span> <span class="inlinecode">...,</span> <span class="inlinecode"><span class="id" title="var">a_n</span>-<span class="id" title="var">b_n</span>:</span> <span class="inlinecode"><span class="id" title="var">t</span></span> â€” uÅ¼yj taktyki <span class="inlinecode"><span class="id" title="var">t</span></span> na wszystkich celach
      o numerach od a_1 do b_1, ..., od a_n do b_n (zamiast a_i-b_i
      moÅ¼emy teÅ¼ uÅ¼yÄ‡ pojedynczej liczby)

</li>
<li> <span class="inlinecode"><span class="id" title="var">all</span>:</span> <span class="inlinecode"><span class="id" title="var">t</span></span>  ­- uÅ¼yj <span class="inlinecode"><span class="id" title="var">t</span></span> na wszystkich celach

</li>
<li> zamiast <span class="inlinecode"><span class="id" title="var">t</span></span>, w powyÅ¼szych przypadkach moÅ¼emy teÅ¼ uÅ¼yÄ‡ wyraÅ¼enia
      <span class="inlinecode">&gt;</span> <span class="inlinecode"><span class="id" title="var">t_1</span></span> <span class="inlinecode">|</span> <span class="inlinecode">...</span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">t_n</span></span>, ktÃ³re aplikuje taktykÄ™ <span class="inlinecode"><span class="id" title="var">t_i</span></span> do i-tego celu
      zaznaczonego danym selektorem 
</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Goal</span> <span class="id" title="keyword">forall</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">R</span> : <span class="id" title="keyword">Prop</span>, <span class="id" title="var">P</span> /\ <span class="id" title="var">Q</span> /\ <span class="id" title="var">R</span> -&gt; <span class="id" title="var">R</span> /\ <span class="id" title="var">Q</span> /\ <span class="id" title="var">P</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> 1 <span class="id" title="keyword">as</span> [<span class="id" title="var">H</span> [<span class="id" title="var">H'</span> <span class="id" title="var">H''</span>]]. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;3: <span class="id" title="tactic">assumption</span>. 2: <span class="id" title="tactic">assumption</span>. 1: <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Restart</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> 1 <span class="id" title="keyword">as</span> [<span class="id" title="var">H</span> [<span class="id" title="var">H'</span> <span class="id" title="var">H''</span>]]. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;1-2: <span class="id" title="tactic">assumption</span>. <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Restart</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> 1 <span class="id" title="keyword">as</span> [<span class="id" title="var">H</span> [<span class="id" title="var">H'</span> <span class="id" title="var">H''</span>]]. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;1-2, 3: <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Restart</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> 1 <span class="id" title="keyword">as</span> [<span class="id" title="var">H</span> [<span class="id" title="var">H'</span> <span class="id" title="var">H''</span>]]. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;1-3: <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Restart</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> 1 <span class="id" title="keyword">as</span> [<span class="id" title="var">H</span> [<span class="id" title="var">H'</span> <span class="id" title="var">H''</span>]]. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Restart</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> 1 <span class="id" title="keyword">as</span> [<span class="id" title="var">H</span> [<span class="id" title="var">H'</span> <span class="id" title="var">H''</span>]]. <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: [&gt; <span class="id" title="tactic">assumption</span> | <span class="id" title="tactic">assumption</span> | <span class="id" title="tactic">assumption</span>].<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
ZauwaÅ¼my, Å¼e powyÅ¼sze selektory dziaÅ‚ajÄ… jedynie, gdy zostanÄ… umieszczone
    przed wszystkimi taktykami, ktÃ³rych dotyczÄ…. PrÃ³ba uÅ¼ycia ich jako
    argumenty dla innych taktyk jest bÅ‚Ä™dem.

<div class="paragraph"> </div>

    Dla przykÅ‚adu, w czwartym z powyÅ¼szych dowodÃ³w nie moÅ¼emy napisaÄ‡
    <span class="inlinecode"><span class="id" title="tactic">repeat</span></span> <span class="inlinecode"><span class="id" title="tactic">split</span>;</span> <span class="inlinecode">1-3:</span> <span class="inlinecode"><span class="id" title="tactic">assumption</span></span>, gdyÅ¼ koÅ„czy siÄ™ to bÅ‚Ä™dem skÅ‚adni
    (nie wspominajÄ…c o tym, Å¼e jest to bez sensu, gdyÅ¼ dla uzyskania
    poÅ¼Ä…danego efektu wystarczy napisaÄ‡ <span class="inlinecode"><span class="id" title="tactic">repeat</span></span> <span class="inlinecode"><span class="id" title="tactic">split</span>;</span> <span class="inlinecode"><span class="id" title="tactic">assumption</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Goal</span> <span class="id" title="keyword">forall</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">R</span> : <span class="id" title="keyword">Prop</span>, <span class="id" title="var">P</span> /\ <span class="id" title="var">Q</span> /\ <span class="id" title="var">R</span> -&gt; <span class="id" title="var">R</span> /\ <span class="id" title="var">Q</span> /\ <span class="id" title="var">P</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> 1 <span class="id" title="keyword">as</span> [<span class="id" title="var">H</span> [<span class="id" title="var">H'</span> <span class="id" title="var">H''</span>]].<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>; <span class="id" title="var">only</span> 1-3: <span class="id" title="tactic">assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Nie wszystko jednak stracone! Å»eby mÃ³c uÅ¼ywaÄ‡ wyraÅ¼eÅ„ zawierajÄ…cych
    selektory jako argumenty taktyk, moÅ¼emy posÅ‚uÅ¼yÄ‡ siÄ™ sÅ‚owem <span class="inlinecode"><span class="id" title="var">only</span></span>.
    Mimo tego, i tak nie moÅ¼emy napisaÄ‡ <span class="inlinecode"><span class="id" title="tactic">repeat</span></span> <span class="inlinecode"><span class="id" title="tactic">split</span>;</span> <span class="inlinecode"><span class="id" title="var">only</span></span> <span class="inlinecode"><span class="id" title="var">all</span>:</span> <span class="inlinecode">...</span>,
    gdyÅ¼ koÅ„czy siÄ™ to bÅ‚Ä™dem skadni. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Goal</span> <span class="id" title="keyword">forall</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span> : <span class="id" title="keyword">Prop</span>, <span class="id" title="var">P</span> -&gt; <span class="id" title="var">P</span> /\ <span class="id" title="var">Q</span> /\ <span class="id" title="var">R</span> /\ <span class="id" title="var">S</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">revgoals</span>. <span class="id" title="var">all</span>: <span class="id" title="var">revgoals</span>. <span class="id" title="var">all</span>: <span class="id" title="var">revgoals</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">swap</span> 1 3. <span class="id" title="var">all</span>: <span class="id" title="var">swap</span> 1 3. <span class="id" title="var">all</span>: <span class="id" title="var">swap</span> 1 3.<br/>
&nbsp;&nbsp;<span class="id" title="var">cycle</span> 42. <span class="id" title="var">all</span>: <span class="id" title="var">cycle</span> 3. <span class="id" title="var">all</span>: <span class="id" title="var">cycle</span> -3.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
Jest jeszcze kilka innych taktyk do Å¼onglowania celami. PamiÄ™taj, Å¼e
    wszystkie z nich dziaÅ‚ajÄ… na liÅ›cie celÃ³w wybranych selektorami â€”
    domyÅ›lnie wybrany jest tylko cel numer 1 i wtedy taktyki te nie majÄ…
    Å¼adnego skutku.

<div class="paragraph"> </div>

    <span class="inlinecode"><span class="id" title="var">revgoals</span></span> odwraca kolejnoÅ›Ä‡ celÃ³w, na ktÃ³rych dziaÅ‚a. W naszym przypadku
    <span class="inlinecode"><span class="id" title="var">revgoals</span></span> nie robi nic (odwraca kolejnoÅ›Ä‡ celu <span class="inlinecode"><span class="id" title="var">P</span></span> na <span class="inlinecode"><span class="id" title="var">P</span></span>), natomiast
    <span class="inlinecode"><span class="id" title="var">all</span>:</span> <span class="inlinecode"><span class="id" title="var">revgoals</span></span> zamienia kolejnoÅ›Ä‡ celÃ³w z <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">â€”</span> <span class="inlinecode"><span class="id" title="var">Q</span></span> <span class="inlinecode">â€”</span> <span class="inlinecode"><span class="id" title="var">R</span></span> <span class="inlinecode">â€”</span> <span class="inlinecode"><span class="id" title="var">S</span></span> na
    <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">â€”</span> <span class="inlinecode"><span class="id" title="var">R</span></span> <span class="inlinecode">â€”</span> <span class="inlinecode"><span class="id" title="var">Q</span></span> <span class="inlinecode">â€”</span> <span class="inlinecode"><span class="id" title="var">P</span></span>.

<div class="paragraph"> </div>

    <span class="inlinecode"><span class="id" title="var">swap</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode"><span class="id" title="var">m</span></span> zamienia miejscami cele n-ty i m-ty. W przykÅ‚adzie <span class="inlinecode"><span class="id" title="var">swap</span></span> <span class="inlinecode">1</span> <span class="inlinecode">3</span>
    nic nie robi, gdyÅ› domyÅ›lnie wybrany jest tylko cel numer 1, a zatem nie
    moÅ¼na zamieniÄ‡ go miejscami z celem nr 3, ktÃ³rego nie ma. <span class="inlinecode"><span class="id" title="var">all</span>:</span> <span class="inlinecode"><span class="id" title="var">swap</span></span> <span class="inlinecode">1</span> <span class="inlinecode">3</span>
    zamienia kolejnoÅ›Ä‡ celÃ³w z <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">â€”</span> <span class="inlinecode"><span class="id" title="var">Q</span></span> <span class="inlinecode">â€”</span> <span class="inlinecode"><span class="id" title="var">R</span></span> <span class="inlinecode">â€”</span> <span class="inlinecode"><span class="id" title="var">S</span></span> na <span class="inlinecode"><span class="id" title="var">R</span></span> <span class="inlinecode">â€”</span> <span class="inlinecode"><span class="id" title="var">Q</span></span> <span class="inlinecode">â€”</span> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">â€”</span> <span class="inlinecode"><span class="id" title="var">S</span></span>.

<div class="paragraph"> </div>

    <span class="inlinecode"><span class="id" title="var">cycle</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> przesuwa cele cyklicznie o <span class="inlinecode"><span class="id" title="var">n</span></span> do przodu (lub do tyÅ‚u, jeÅ¼eli
    argument jest liczbÄ… ujemnÄ…). W naszym przykÅ‚adzie <span class="inlinecode"><span class="id" title="var">cycle</span></span> <span class="inlinecode">42</span> nic nie robi
    (przesuwa cyklicznie cel <span class="inlinecode"><span class="id" title="var">P</span></span> o 42 miejsca, co daje w wyniku <span class="inlinecode"><span class="id" title="var">P</span></span>), zaÅ›
    <span class="inlinecode"><span class="id" title="var">all</span>:</span> <span class="inlinecode"><span class="id" title="var">cycle</span></span> <span class="inlinecode">3</span> zamienia kolejnoÅ›Ä‡ celÃ³w z <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">â€”</span> <span class="inlinecode"><span class="id" title="var">Q</span></span> <span class="inlinecode">â€”</span> <span class="inlinecode"><span class="id" title="var">R</span></span> <span class="inlinecode">â€”</span> <span class="inlinecode"><span class="id" title="var">S</span></span> na
    <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">â€”</span> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">â€”</span> <span class="inlinecode"><span class="id" title="var">Q</span></span> <span class="inlinecode">â€”</span> <span class="inlinecode"><span class="id" title="var">R</span></span>.

<div class="paragraph"> </div>

    Taktyki te nie sÄ… zbyt uÅ¼yteczne, a przynajmniej ja nigdy ich nie uÅ¼yÅ‚em,
    ale dla kompletnoÅ›ci wypadaÅ‚o o nich wspomnieÄ‡. JeÅ¼eli wÄ…tpisz w
    uÅ¼ytecznoÅ›Ä‡ selektorÃ³w... cÃ³Å¼, nie dziwiÄ™ ci siÄ™. Selektory przydajÄ… siÄ™
    gÅ‚Ã³wnie gdy chcemy napisaÄ‡ taktykÄ™ rozwiÄ…zujÄ…cÄ… wszystkie cele i
    sprawdzamy jej dziaÅ‚anie na kaÅ¼dym celu z osobna. W pozostaÅ‚ych przypadkach
    sÄ… tylko zbÄ™dnym balastem. 
<div class="paragraph"> </div>

<a name="lab451"></a><h1 class="section">Podstawy jÄ™zyka Ltac</h1>

<div class="paragraph"> </div>

 Ltac jest funkcyjnym jÄ™zykiem programowania, podobnie jak jÄ™zyk termÃ³w
    Coqa (zwany Gallina), lecz te dwa jÄ™zyki sÄ… diametralnie rÃ³Å¼ne:
<ul class="doclist">
<li> Ltac jest kompletny w sensie Turinga, a Gallina nie. W szczegÃ³lnoÅ›ci,
      taktyki mogÄ… siÄ™ zapÄ™tlaÄ‡ i nie rodzi to Å¼adnych problemÃ³w natury
      logicznej.

</li>
<li> Ltac jest bardzo sÅ‚abo typowany, podczas gdy Gallina dysponuje potÄ™Å¼nym
      systemem typÃ³w.

</li>
<li> W Ltacu nie moÅ¼emy definiowaÄ‡ typÃ³w danych, a jedynie taktyki dziaÅ‚ajÄ…ce
      na kontekstach i celu, podczas gdy Gallina pozwala na definiowanie
      bardzo szerokiej klasy typÃ³w i dziaÅ‚ajÄ…cych na nich funkcji.

</li>
<li> Ltac, jako metajÄ™zyk jezyka Gallina, posiada dostÄ™p do rÃ³Å¼nych rzeczy,
      do ktÃ³rych Gallina nie ma dostÄ™pu, takich jak dopasowanie termÃ³w
      dowolnego typu. Dla przykÅ‚adu, w Ltacu moÅ¼emy odrÃ³Å¼niÄ‡ termy <span class="inlinecode">4</span> oraz
      <span class="inlinecode">2</span> <span class="inlinecode">+</span> <span class="inlinecode">2</span> pomimo tego, Å¼e sÄ… konwertowalne. 
</li>
</ul>

<div class="paragraph"> </div>

 W Ltacu moÅ¼emy manipulowaÄ‡ trzema rodzajami bytÃ³w: taktykami, termami
    Coqa oraz liczbami caÅ‚kowitymi â€” te ostatnie nie sÄ… tym samym, co liczby
    caÅ‚kowite Coqa i bÄ™dziemy ich uÅ¼ywaÄ‡ sporadycznie. Zanim zobaczymy
    przykÅ‚ad, przyjrzyjmy siÄ™ taktyce <span class="inlinecode"><span class="id" title="tactic">pose</span></span> oraz konstruktowi <span class="inlinecode"><span class="id" title="keyword">let</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Goal</span> <span class="id" title="var">True</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">true</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> (<span class="id" title="var">nazwa</span> := 123).<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="tactic">pose</span></span> <span class="inlinecode"><span class="id" title="var">t</span></span> dodaje do kontekstu term o domyÅ›lnej nazwie, ktÃ³rego ciaÅ‚em
    jest <span class="inlinecode"><span class="id" title="var">t</span></span>. MoÅ¼emy teÅ¼ napisaÄ‡ <span class="inlinecode"><span class="id" title="tactic">pose</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">t</span></span>, dziÄ™ki czemu zyskujemy
    kontrolÄ™ nad nazwÄ… termu. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Goal</span> <span class="id" title="var">True</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Fail</span> <span class="id" title="keyword">let</span> <span class="id" title="var">x</span> := 42 <span class="id" title="tactic">in</span> <span class="id" title="tactic">pose</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">x</span> := <span class="id" title="keyword">constr</span>:(42) <span class="id" title="tactic">in</span> <span class="id" title="tactic">pose</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">x</span> := <span class="id" title="tactic">split</span> <span class="id" title="tactic">in</span> <span class="id" title="tactic">idtac</span> <span class="id" title="var">x</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
W Ltacu, podobnie jak w jÄ™zyku Gallina, mamy do dyspozycji konstrukt
    <span class="inlinecode"><span class="id" title="keyword">let</span></span>. Za jego pomocÄ… moÅ¼emy nadaÄ‡ nazwÄ™ dowolnemu wyraÅ¼eniu jÄ™zyka
    Ltac. Jego dziaÅ‚anie jest podobne jak w jÄ™zyku Gallina, a wiÄ™c nie
    ma co siÄ™ nad nim rozwodziÄ‡. Jest teÅ¼ konstrukt <span class="inlinecode"><span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="keyword">rec</span></span>, ktÃ³ry
    odpowiada <span class="inlinecode"><span class="id" title="keyword">fix</span></span>owi Galliny.

<div class="paragraph"> </div>

    SprÃ³bujmy dodaÄ‡ do kontekstu liczbÄ™ <span class="inlinecode">42</span>, nazwanÄ… dowolnie. KomendÄ…
    <span class="inlinecode"><span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:=</span> <span class="inlinecode">42</span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="tactic">pose</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> nie udaje nam siÄ™ tego osiÄ…gnÄ…Ä‡. O przyczynie
    niepowodzenia Coq informuje nas wprost: zmienna <span class="inlinecode"><span class="id" title="var">x</span></span> nie jest termem.
    Czym zatem jest? Jak juÅ¼ siÄ™ rzekÅ‚o, Ltac posiada wbudowany typ liczb
    caÅ‚kowitych, ktÃ³re nie sÄ… tym samym, co induktywnie zdefiniowane liczby
    caÅ‚kowite Coqa. W tym kontekÅ›cie <span class="inlinecode">42</span> jest wiÄ™c liczbÄ… caÅ‚kowitÄ… Ltaca,
    a zatem nie jest termem.

<div class="paragraph"> </div>

    Aby wymusiÄ‡ na Ltacu zinterpretowanie <span class="inlinecode">42</span> jako termu Coqa, musimy
    posÅ‚uÅ¼yÄ‡ siÄ™ zapisem <span class="inlinecode"><span class="id" title="keyword">constr</span>:()</span>. DziÄ™ki niemu argument znajdujÄ…cy
    siÄ™ w nawiasach zostanie zinterpretowany jako term. Efektem dziaÅ‚ania
    drugiej taktyki jest wiÄ™c dodanie termu <span class="inlinecode">42</span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">nat</span></span> do kontekstu,
    nazwanego domyÅ›lnie <span class="inlinecode"><span class="id" title="var">n</span></span> (co jest, o dziwo, doÅ›Ä‡ rozsÄ…dnÄ… nazwÄ…).

<div class="paragraph"> </div>

    WyraÅ¼enie <span class="inlinecode"><span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="tactic">split</span></span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="tactic">idtac</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> pokazuje nam, Å¼e taktyki rÃ³wnieÅ¼
    sÄ… wyraÅ¼eniami Ltaca i mogÄ… byÄ‡ przypisywane do zmiennych (a takÅ¼e
    wyÅ›wietlane za pomocÄ… taktyki <span class="inlinecode"><span class="id" title="tactic">idtac</span></span>) tak jak kaÅ¼de inne wyraÅ¼enie. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">garbage</span> <span class="id" title="var">n</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">pose</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">idtac</span> "Here's some garbage: " <span class="id" title="var">n</span>.<br/>

<br/>
<span class="id" title="keyword">Goal</span> <span class="id" title="var">True</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">garbage</span> 0.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">garbage'</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">fun</span> <span class="id" title="var">n</span> =&gt; <span class="id" title="tactic">pose</span> <span class="id" title="var">n</span>; <span class="id" title="tactic">idtac</span> "Here's some garbage: " <span class="id" title="var">n</span>.<br/>

<br/>
<span class="id" title="keyword">Goal</span> <span class="id" title="var">True</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">garbage'</span> 0.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
DowolnÄ… taktykÄ™, ktÃ³rej moÅ¼emy uÅ¼yÄ‡ w dowodzie, moÅ¼emy teÅ¼ nazwaÄ‡
    za pomocÄ… komendy <span class="inlinecode"><span class="id" title="keyword">Ltac</span></span> i odwoÅ‚ywaÄ‡ siÄ™ do niej w dowodach za pomocÄ…
    tej nazwy. Komenda <span class="inlinecode"><span class="id" title="keyword">Ltac</span></span> jest wiÄ™c taktykowym odpowiednikiem komendy
    <span class="inlinecode"><span class="id" title="keyword">Fixpoint</span></span>.

<div class="paragraph"> </div>

    Podobnie jak <span class="inlinecode"><span class="id" title="keyword">Fixpoint</span></span>y i inne definicje, tak i taktyki zdefiniowane
    za pomocÄ… komendy <span class="inlinecode"><span class="id" title="keyword">Ltac</span></span> mogÄ… braÄ‡ argumenty, ktÃ³rymi mogÄ… byÄ‡ liczby,
    termy, nazwy hipotez albo inne taktyki.

<div class="paragraph"> </div>

    Zapis <span class="inlinecode"><span class="id" title="keyword">Ltac</span></span> <span class="inlinecode"><span class="id" title="var">name</span></span> <span class="inlinecode"><span class="id" title="var">arg_1</span></span> <span class="inlinecode">...</span> <span class="inlinecode"><span class="id" title="var">arg_n</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="var">body</span></span> jest jedynie skrÃ³tem, ktÃ³ry
    oznacza <span class="inlinecode"><span class="id" title="keyword">Ltac</span></span> <span class="inlinecode"><span class="id" title="var">name</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="keyword">fun</span></span> <span class="inlinecode"><span class="id" title="var">arg_1</span></span> <span class="inlinecode">...</span> <span class="inlinecode"><span class="id" title="var">arg_n</span></span> <span class="inlinecode">=&gt;</span> <span class="inlinecode"><span class="id" title="var">body</span></span>. Jest to uwaga
    mocno techniczna, gdyÅ¼ pierwszy zapis jest prawie zawsze preferowany
    wobec drugiego. 
<div class="paragraph"> </div>

<a name="lab452"></a><h1 class="section">Backtracking</h1>

<div class="paragraph"> </div>

 PoznaÅ‚eÅ› juÅ¼ kombinator alternatywy <span class="inlinecode">||</span>. Nie jest to jednak jedyny
    kombinator sÅ‚uÅ¼Ä…cy do wyraÅ¼ania tej idei â€” sÄ… jeszcze kombinatory <span class="inlinecode">+</span>
    oraz <span class="inlinecode"><span class="id" title="var">tryif</span></span> <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode"><span class="id" title="keyword">then</span></span> <span class="inlinecode"><span class="id" title="var">t2</span></span> <span class="inlinecode"><span class="id" title="keyword">else</span></span> <span class="inlinecode"><span class="id" title="var">t3</span></span>. RÃ³Å¼niÄ… siÄ™ one dziaÅ‚aniem â€” <span class="inlinecode">||</span> jest
    left-biased, podczas gdy <span class="inlinecode">+</span> nie jest biased i moÅ¼e powodowaÄ‡
    backtracking.

<div class="paragraph"> </div>

    Nie przestrasz siÄ™ tych dziwnych sÅ‚Ã³w. StojÄ…ce za nimi idee sÄ… z grubsza
    bardzo proste. WczeÅ›niej dowiedziaÅ‚eÅ› siÄ™, Å¼e taktyka moÅ¼e zawieÅ›Ä‡ lub
    zakoÅ„czyÄ‡ siÄ™ sukcesem. W rzeczywistoÅ›ci sprawa jest nieco bardziej
    ogÃ³lna: kaÅ¼da taktyka moÅ¼e zakoÅ„czyÄ‡ siÄ™ dowolnÄ… iloÅ›ciÄ… sukcesÃ³w. Zero
    sukcesÃ³w oznacza, Å¼e taktyka zawodzi. WiÄ™kszoÅ›Ä‡ taktyk, ktÃ³re dotychczas
    poznaliÅ›my, mogÅ‚a zakoÅ„czyÄ‡ siÄ™ co najwyÅ¼ej jednym sukcesem. SÄ… jednak i
    takie, ktÃ³re mogÄ… zakoÅ„czyÄ‡ siÄ™ dwoma lub wiÄ™cej sukcesami.

<div class="paragraph"> </div>

    Proces dowodzenia za pomocÄ… taktyk moÅ¼na zobrazowaÄ‡ za pomocÄ… procesu
    przeszukiwania drzewa, ktÃ³rego wierzchoÅ‚kami sÄ… czÄ™Å›ciowo skonstruowane
    prooftermy, zaÅ› krawÄ™dziami â€” sukcesy pochodzÄ…ce od wywoÅ‚ywania taktyk.
    LiÅ›Ä‡mi sÄ… prooftermy (dowÃ³d siÄ™ udaÅ‚) lub Å›lepe zauÅ‚ki (dowÃ³d siÄ™ nie
    udaÅ‚).

<div class="paragraph"> </div>

    W takiej wizualizacji taktyka moÅ¼e wyzwalaÄ‡ backtracking, jeÅ¼eli jej
    uÅ¼ycie prowadzi do powstania rozgaÅ‚Ä™zienia w drzewie. Samo drzewo
    przeszukiwane jest w gÅ‚Ä…b, a backtracking polega na tym, Å¼e jeÅ¼eli
    trafimy na Å›lepy zauÅ‚ek (dowÃ³d siÄ™ nie powiÃ³dÅ‚), to cofamy siÄ™ (ang.
    "to backtrack" â€” cofaÄ‡ siÄ™) do ostatniego punktu rozgaÅ‚Ä™zienia i
    prÃ³bujemy pÃ³jÅ›Ä‡ innÄ… gaÅ‚Ä™ziÄ….

<div class="paragraph"> </div>

    TÄ™ intuicjÄ™ dobrze widaÄ‡ na poniÅ¼szym przykÅ‚adzie. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">existsNatFrom</span> <span class="id" title="var">n</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">n</span> || <span class="id" title="var">existsNatFrom</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>).<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">existsNat</span> := <span class="id" title="var">existsNatFrom</span> <span class="id" title="var">O</span>.<br/>

<br/>
<span class="id" title="keyword">Goal</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">n</span> = 42.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Fail</span> (<span class="id" title="var">existsNat</span>; <span class="id" title="tactic">reflexivity</span>).<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">existsNatFrom'</span> <span class="id" title="var">n</span> :=<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">n</span> + <span class="id" title="var">existsNatFrom'</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>).<br/>

<br/>
<span class="id" title="keyword">Ltac</span> <span class="id" title="var">existsNat'</span> := <span class="id" title="var">existsNatFrom'</span> <span class="id" title="var">O</span>.<br/>

<br/>
<span class="id" title="keyword">Goal</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">n</span> = 42.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">existsNat'</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
PrÃ³ba uÅ¼ycia taktyki <span class="inlinecode"><span class="id" title="var">existsNat</span></span>, ktÃ³ra uÅ¼ywa kombinatora <span class="inlinecode">||</span>, do
    udowodnienia, Å¼e <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">nat</span>,</span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode">42</span> koÅ„czy siÄ™ niepowodzeniem.
    Jest tak, gdyÅ¼ <span class="inlinecode">||</span> nie moÅ¼e powodowaÄ‡ backtrackingu â€” jeÅ¼eli taktyka
    <span class="inlinecode"><span class="id" title="var">t1</span></span> dokona postÄ™pu, to wtedy <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode">||</span> <span class="inlinecode"><span class="id" title="var">t2</span></span> ma taki sam efekt, jak <span class="inlinecode"><span class="id" title="var">t1</span></span>,
    a w przeciwnym wypadku taki sam jak <span class="inlinecode"><span class="id" title="var">t2</span></span>. Nawet jeÅ¼eli zarÃ³wno <span class="inlinecode"><span class="id" title="var">t1</span></span>
    jak i <span class="inlinecode"><span class="id" title="var">t2</span></span> zakoÅ„czÄ… siÄ™ sukcesami, to sukcesy <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode">||</span> <span class="inlinecode"><span class="id" title="var">t2</span></span> bÄ™dÄ… sukcesami
    tylko <span class="inlinecode"><span class="id" title="var">t1</span></span>.

<div class="paragraph"> </div>

    Na mocy powyÅ¼szych rozwaÅ¼aÅ„ moÅ¼emy skonkludowaÄ‡, Å¼e taktyka <span class="inlinecode"><span class="id" title="var">existsNat</span></span>
    ma co najwyÅ¼ej jeden sukces i dziaÅ‚a jak <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> dla pewnej liczby
    naturalnej <span class="inlinecode"><span class="id" title="var">n</span></span>. PoniewaÅ¼ uÅ¼ycie <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode">0</span> na celu <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">nat</span>,</span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">=</span> <span class="inlinecode">42</span>
    dokonuje postÄ™pu, to taktyka <span class="inlinecode"><span class="id" title="var">existsNat</span></span> ma taki sam efekt, jak <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode">0</span>.
    PrÃ³ba uÅ¼ycia <span class="inlinecode"><span class="id" title="tactic">reflexivity</span></span> zawodzi, a poniewaÅ¼ nie ma juÅ¼ wiÄ™cej sukcesÃ³w
    pochodzÄ…cych od <span class="inlinecode"><span class="id" title="var">existsNat</span></span> do wyprÃ³bowania, nie wyzwala backtrackingu.
    Wobec tego caÅ‚a taktyka <span class="inlinecode"><span class="id" title="var">existsNat</span>;</span> <span class="inlinecode"><span class="id" title="tactic">reflexivity</span></span> koÅ„czy siÄ™ poraÅ¼kÄ….

<div class="paragraph"> </div>

    Inaczej sytuacja wyglÄ…da w przypadku <span class="inlinecode"><span class="id" title="var">existsNat'</span></span>, ktÃ³ra bazuje na
    kombinatorze <span class="inlinecode">+</span>. Sukcesy <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">t2</span></span> to wszystkie sukcesy <span class="inlinecode"><span class="id" title="var">t1</span></span>, po
    ktÃ³rych nastÄ™pujÄ… wszystkie sukcesy <span class="inlinecode"><span class="id" title="var">t2</span></span>. Wobec tego zbiÃ³r sukcesÃ³w
    <span class="inlinecode"><span class="id" title="var">existsNat'</span></span> jest nieskoÅ„czony i wyglÄ…da tak: <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode">0</span>, <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode">1</span>,
    <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode">2</span>... UÅ¼ycie taktyki <span class="inlinecode"><span class="id" title="tactic">reflexivity</span></span>, ktÃ³re koÅ„czy siÄ™ poraÅ¼kÄ…
    wyzwala backtracking, wiÄ™c caÅ‚e wykonanie taktyki moÅ¼na zobrazowaÄ‡ tak:
<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode">0;</span> <span class="inlinecode"><span class="id" title="tactic">reflexivity</span></span> â€” poraÅ¼ka

</li>
<li> <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode">1;</span> <span class="inlinecode"><span class="id" title="tactic">reflexivity</span></span> â€” poraÅ¼ka

</li>
<li> ...

</li>
<li> <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode">42;</span> <span class="inlinecode"><span class="id" title="tactic">reflexivity</span></span> â€” sukces 
</li>
</ul>

<div class="paragraph"> </div>

 Na koniec zaznaczyÄ‡ naleÅ¼y, Å¼e backtracking nie jest za darmo â€” im go
    wiÄ™cej, tym wiÄ™cej rozgaÅ‚Ä™zieÅ„ w naszym drzewie poszukiwaÅ„, a zatem
    tym wiÄ™cej czasu zajmie wykonanie taktyki. W przypadku uÅ¼ycia taktyk
    takich jak <span class="inlinecode"><span class="id" title="var">existsNat</span></span>, ktÃ³re majÄ… nieskoÅ„czony zbiÃ³r sukcesÃ³w, dowÃ³d
    moÅ¼e nie zostaÄ‡ znaleziony nigdy, nawet jeÅ¼eli istnieje.

<div class="paragraph"> </div>

    Jednym ze sposobÃ³w radzenia sobie z tym problemem moÅ¼e byÄ‡ kombinator
    <span class="inlinecode"><span class="id" title="var">once</span></span>, ktÃ³ry ogranicza liczbÄ™ sukcesÃ³w taktyki do co najwyÅ¼ej jednego,
    zapobiegajÄ…c w ten sposÃ³b potencjalnemu wyzwoleniu backtrackingu. Innymi
    sÅ‚owy, <span class="inlinecode"><span class="id" title="var">once</span></span> <span class="inlinecode"><span class="id" title="var">t</span></span> zawsze ma 0 lub 1 sukcesÃ³w. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Goal</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">n</span> = 42.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Fail</span> <span class="id" title="var">once</span> <span class="id" title="var">existsNat'</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
PowyÅ¼ej byliÅ›my w stanie udowodniÄ‡ to twierdzenie za pomocÄ… taktyki
    <span class="inlinecode"><span class="id" title="var">existsNat'</span></span>, gdyÅ¼ jej 42  sukces pozwalaÅ‚ taktyce <span class="inlinecode"><span class="id" title="tactic">reflexivity</span></span>
    uporaÄ‡ siÄ™ z celem. Jednak jeÅ¼eli uÅ¼yjemy na tej taktyce kombinatora
    <span class="inlinecode"><span class="id" title="var">once</span></span>, to zbiÃ³r jej sukcesÃ³w zostanie obciÄ™ty do co najwyÅ¼ej jednego

<div class="paragraph"> </div>

    Skoro <span class="inlinecode"><span class="id" title="var">existsNat'</span></span> byÅ‚o rÃ³wnowaÅ¼ne ktÃ³remuÅ› z <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode">0</span>, <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode">1</span>,
    <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode">2</span>, ..., to <span class="inlinecode"><span class="id" title="var">once</span></span> <span class="inlinecode"><span class="id" title="var">existsNat'</span></span> jest rÃ³wnowaÅ¼ne <span class="inlinecode"><span class="id" title="tactic">exists</span></span> <span class="inlinecode">0</span>, a
    zatem zawodzi.

<div class="paragraph"> </div>

    Innym sposobem okieÅ‚znywania backtrackingu jest kombinator <span class="inlinecode"><span class="id" title="var">exactly_once</span></span>,
    ktÃ³ry pozwala upewniÄ‡ siÄ™, Å¼e dana taktyka ma dokÅ‚adnie jeden sukces.
    JeÅ¼eli <span class="inlinecode"><span class="id" title="var">t</span></span> zawodzi, to <span class="inlinecode"><span class="id" title="var">exactly_once</span></span> <span class="inlinecode"><span class="id" title="var">t</span></span> zawodzi tak jak <span class="inlinecode"><span class="id" title="var">t</span></span>. JeÅ¼eli <span class="inlinecode"><span class="id" title="var">t</span></span>
    ma jeden sukces, <span class="inlinecode"><span class="id" title="var">exactly_once</span></span> <span class="inlinecode"><span class="id" title="var">t</span></span> dziaÅ‚a tak jak <span class="inlinecode"><span class="id" title="var">t</span></span>. JeÅ¼eli <span class="inlinecode"><span class="id" title="var">t</span></span> ma dwa
    lub wiÄ™cej sukcesÃ³w, <span class="inlinecode"><span class="id" title="var">exactly_once</span></span> <span class="inlinecode"><span class="id" title="var">t</span></span> zawodzi. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Goal</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">n</span> = 42.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">exactly_once</span> <span class="id" title="var">existsNat</span>.<br/>
<span class="id" title="keyword">Restart</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Fail</span> <span class="id" title="var">exactly_once</span> <span class="id" title="var">existsNat'</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
Taktyka <span class="inlinecode"><span class="id" title="var">existsNat</span></span>, zrobiona kombinatorem alternatywy <span class="inlinecode">||</span>, ma dokÅ‚adnie
    jeden sukces, a wiÄ™c <span class="inlinecode"><span class="id" title="var">exactly_once</span></span> <span class="inlinecode"><span class="id" title="var">existsNat</span></span> dziaÅ‚a tak jak <span class="inlinecode"><span class="id" title="var">existsNat</span></span>.
    Z drugiej strony taktyka <span class="inlinecode"><span class="id" title="var">existsNat'</span></span>, zrobiona mogÄ…cym dokonywaÄ‡ nawrotÃ³w
    kombinatorem alternatywy <span class="inlinecode">+</span>, ma wiele sukcesÃ³w i wobec tego
    <span class="inlinecode"><span class="id" title="var">exactly_once</span></span> <span class="inlinecode"><span class="id" title="var">existsNat'</span></span> zawodzi. 
<div class="paragraph"> </div>

<a name="lab453"></a><h4 class="section">Ä†wiczenie (existsNat'')</h4>

<div class="paragraph"> </div>

 Przepisz taktykÄ™ <span class="inlinecode"><span class="id" title="var">existsNat'</span></span> za pomocÄ… konstruktu <span class="inlinecode"><span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="keyword">rec</span></span> â€”
    caÅ‚oÅ›Ä‡ ma wyglÄ…daÄ‡ tak: <span class="inlinecode"><span class="id" title="keyword">Ltac</span></span> <span class="inlinecode"><span class="id" title="var">existsNat''</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="keyword">rec</span></span> <span class="inlinecode">...</span> 
</div>
<div class="code">

<br/>

<br/>
<span class="id" title="keyword">Goal</span> <span class="id" title="tactic">exists</span> <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">n</span> = 42.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">existsNat''</span>; <span class="id" title="tactic">reflexivity</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab454"></a><h4 class="section">Ä†wiczenie (exists_length_3_letrec)</h4>

<div class="paragraph"> </div>

 Udowodnij poniÅ¼sze twierdzenie za pomocÄ… pojedynczej taktyki, ktÃ³ra
    generuje wszystkie moÅ¼liwe listy wartoÅ›ci boolowskich. CaÅ‚oÅ›Ä‡ zrÃ³b za
    pomocÄ… konstruktu <span class="inlinecode"><span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="keyword">rec</span></span> w miejscu, tj. bez uÅ¼ycia komendy <span class="inlinecode"><span class="id" title="keyword">Ltac</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">List</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ListNotations</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">exists_length_3_letrec</span> :<br/>
&nbsp;&nbsp;<span class="id" title="tactic">exists</span> <span class="id" title="var">l</span> : <span class="id" title="var">list</span> <span class="id" title="var">bool</span>, <span class="id" title="var">length</span> <span class="id" title="var">l</span> = 3.<br/>

<br/>
</div>

<div class="doc">
<a name="lab455"></a><h4 class="section">Ä†wiczenie (trivial_goal)</h4>

<div class="paragraph"> </div>

 ZnajdÅº taki trywialnie prawdziwy cel i takÄ… taktykÄ™, ktÃ³ra wywoÅ‚uje
    <span class="inlinecode"><span class="id" title="var">existsNat'</span></span>, Å¼e taktyka ta nie skoÅ„czy pracy i nigdy nie znajdzie
    dowodu, mimo Å¼e dla czÅ‚owieka znalezienie dowodu jest banalne. 
</div>
<div class="code">

<br/>

<br/>
</div>

<div class="doc">
<a name="lab456"></a><h4 class="section">Ä†wiczenie (search)</h4>

<div class="paragraph"> </div>

 Napisz taktykÄ™ <span class="inlinecode"><span class="id" title="var">search</span></span>, ktÃ³ra potrafi udowodniÄ‡ cel bÄ™dÄ…cy dowolnie
    zÅ‚oÅ¼onÄ… dysjunkcjÄ… pod warunkiem, Å¼e jeden z jej czÅ‚onÃ³w zachodzi na
    mocy zaÅ‚oÅ¼enia. UÅ¼yj rekursji, ale nie uÅ¼ywaj konstruktu <span class="inlinecode"><span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="keyword">rec</span></span>.

<div class="paragraph"> </div>

    WskazÃ³wka: jeÅ¼eli masz problem, udowodnij poÅ‚owÄ™ poniÅ¼szych twierdzeÅ„
    rÄ™cznie i sprÃ³buj dostrzec powtarzajÄ…cy si wzorzec. 
</div>
<div class="code">

<br/>

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">search</span>.<br/>

<br/>
<span class="id" title="keyword">Hypotheses</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span> <span class="id" title="var">E</span> <span class="id" title="var">F</span> <span class="id" title="var">G</span> <span class="id" title="var">H</span> <span class="id" title="var">I</span> <span class="id" title="var">J</span> : <span class="id" title="keyword">Prop</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">search_0</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">I</span> -&gt; <span class="id" title="var">A</span> \/ <span class="id" title="var">B</span> \/ <span class="id" title="var">C</span> \/ <span class="id" title="var">D</span> \/ <span class="id" title="var">E</span> \/ <span class="id" title="var">F</span> \/ <span class="id" title="var">G</span> \/ <span class="id" title="var">I</span> \/ <span class="id" title="var">J</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">search</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">search_1</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">I</span> -&gt; (((((((<span class="id" title="var">A</span> \/ <span class="id" title="var">B</span>) \/ <span class="id" title="var">C</span>) \/ <span class="id" title="var">D</span>) \/ <span class="id" title="var">E</span>) \/ <span class="id" title="var">F</span>) \/ <span class="id" title="var">G</span>) \/ <span class="id" title="var">I</span>) \/ <span class="id" title="var">J</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">search</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">search_2</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">F</span> -&gt; (<span class="id" title="var">A</span> \/ <span class="id" title="var">B</span>) \/ (<span class="id" title="var">C</span> \/ ((<span class="id" title="var">D</span> \/ <span class="id" title="var">E</span> \/ (<span class="id" title="var">F</span> \/ <span class="id" title="var">G</span>)) \/ <span class="id" title="var">H</span>) \/ <span class="id" title="var">I</span>) \/ <span class="id" title="var">J</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">search</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">search_3</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">C</span> -&gt; (<span class="id" title="var">J</span> \/ <span class="id" title="var">J</span> \/ ((<span class="id" title="var">A</span> \/ <span class="id" title="var">A</span> \/ (<span class="id" title="var">C</span> \/ <span class="id" title="var">D</span> \/ (<span class="id" title="var">E</span> \/ <span class="id" title="var">E</span>))))).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">search</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">search_4</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> \/ <span class="id" title="var">B</span> \/ <span class="id" title="var">C</span> \/ <span class="id" title="var">D</span> \/ <span class="id" title="var">E</span> \/ <span class="id" title="var">F</span> \/ <span class="id" title="var">G</span> \/ <span class="id" title="var">I</span> \/ <span class="id" title="var">J</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">search</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">search_5</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">D</span> -&gt; ~<span class="id" title="var">A</span> \/ ((~<span class="id" title="var">B</span> \/ (<span class="id" title="var">I</span> -&gt; <span class="id" title="var">I</span>) \/ (<span class="id" title="var">J</span> -&gt; <span class="id" title="var">J</span>)) \/ (<span class="id" title="var">D</span> \/ (~<span class="id" title="var">D</span> -&gt; ~~<span class="id" title="var">D</span>) \/ <span class="id" title="var">B</span> \/ <span class="id" title="var">B</span>)).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">search</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">search_6</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">C</span> -&gt; (~~<span class="id" title="var">C</span> /\ ~~~<span class="id" title="var">C</span>) \/ ((<span class="id" title="var">C</span> /\ ~<span class="id" title="var">C</span>) \/ (~<span class="id" title="var">C</span> /\ <span class="id" title="var">C</span>) \/ (<span class="id" title="var">C</span> -&gt; <span class="id" title="var">C</span>) \/ (<span class="id" title="var">C</span> \/ ~<span class="id" title="var">C</span>)).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">search</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">search</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab457"></a><h4 class="section">Ä†wiczenie (inne_kombinatory_dla_alternatywy)</h4>

<div class="paragraph"> </div>

 Zbadaj samodzielnie na podstawie dokumentacji, jak dziaÅ‚ajÄ… nastÄ™pujÄ…ce
    kombinatory:
<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="var">tryif</span></span> <span class="inlinecode"><span class="id" title="var">t1</span></span> <span class="inlinecode"><span class="id" title="keyword">then</span></span> <span class="inlinecode"><span class="id" title="var">t2</span></span> <span class="inlinecode"><span class="id" title="keyword">else</span></span> <span class="inlinecode"><span class="id" title="var">t3</span></span>

</li>
<li> <span class="inlinecode"><span class="id" title="tactic">first</span></span> <span class="inlinecode">[<span class="id" title="var">t_1</span></span> <span class="inlinecode">|</span> <span class="inlinecode">...</span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">t_N</span>]</span>

</li>
<li> <span class="inlinecode"><span class="id" title="tactic">solve</span></span> <span class="inlinecode">[<span class="id" title="var">t_1</span></span> <span class="inlinecode">|</span> <span class="inlinecode">...</span> <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">t_N</span>]</span> 
</li>
</ul>

<div class="paragraph"> </div>

 Precyzyjniej piszÄ…c: sprawdÅº kiedy odnoszÄ… sukces i zawodzÄ…, czy mogÄ…
    wyzwalaÄ‡ backtracking oraz wymyÅ›l jakieÅ› mÄ…dre przykÅ‚ady, ktÃ³ry dobrze
    ukazujÄ… ichdziaÅ‚anie w kontraÅ›cie do <span class="inlinecode">||</span> i <span class="inlinecode">+</span>. 
<div class="paragraph"> </div>

<a name="lab458"></a><h1 class="section">Dopasowanie kontekstu i celu</h1>

<div class="paragraph"> </div>

 Chyba najwaÅ¼niejszym konstruktem Ltaca jest <span class="inlinecode"><span class="id" title="keyword">match</span></span> <span class="inlinecode"><span class="id" title="keyword">goal</span></span>, ktÃ³ry prÃ³buje
    dopasowaÄ‡ kontekst oraz cel do podanych wzorcÃ³w. MajÄ… one postaÄ‡
    <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">kontekst</span></span> <span class="inlinecode">|-</span> <span class="inlinecode"><span class="id" title="var">cel</span></span> <span class="inlinecode">=&gt;</span> <span class="inlinecode"><span class="id" title="var">taktyka</span></span>.

<div class="paragraph"> </div>

    WyraÅ¼enie <span class="inlinecode"><span class="id" title="var">kontekst</span></span> jest listÄ… hipotez, ktÃ³rych szukamy w kontekÅ›cie,
    tzn. jest postaci <span class="inlinecode"><span class="id" title="var">x_1</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">A_1</span>,</span> <span class="inlinecode"><span class="id" title="var">x_2</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">A_2</span>...</span>, gdzie <span class="inlinecode"><span class="id" title="var">x_i</span></span> jest nazwÄ…
    hipotezy, zaÅ› <span class="inlinecode"><span class="id" title="var">A_1</span></span> jest wzorcem dopasowujÄ…cym jej typ. WyraÅ¼enie <span class="inlinecode"><span class="id" title="var">cel</span></span>
    jest wzorcem dopasowujÄ…cym typ, ktÃ³ry reprezentuje nasz cel. Po strzaÅ‚ce
    <span class="inlinecode">=&gt;</span> nastÄ™puje taktyka, ktÃ³rej chcemy uÅ¼yÄ‡, jeÅ¼eli dany wzorzec zostanie
    dopasowany.

<div class="paragraph"> </div>

    Zamiast wzorcÃ³w postaci <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">kontekst</span></span> <span class="inlinecode">|-</span> <span class="inlinecode"><span class="id" title="var">cel</span></span> <span class="inlinecode">=&gt;</span> <span class="inlinecode"><span class="id" title="var">taktyka</span></span> moÅ¼emy teÅ¼ uÅ¼ywaÄ‡
    wzorcÃ³w postaci <span class="inlinecode">|</span> <span class="inlinecode">|-</span> <span class="inlinecode"><span class="id" title="var">cel</span></span> <span class="inlinecode">=&gt;</span> <span class="inlinecode"><span class="id" title="var">taktyka</span></span>, ktÃ³re dopasowujÄ… jedynie cel, zaÅ›
    kontekst ignorujÄ…; wzorcÃ³w postaci <span class="inlinecode">|</span> <span class="inlinecode"><span class="id" title="var">kontekst</span></span> <span class="inlinecode">|-</span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode">=&gt;</span> <span class="inlinecode"><span class="id" title="var">taktyka</span></span>, ktÃ³re
    dopasowujÄ… jedynie kontekst, a cel ignorujÄ…; oraz wzorca <span class="inlinecode"><span class="id" title="var">_</span></span>, ktÃ³ry
    oznacza "dopasuj cokolwiek".

<div class="paragraph"> </div>

    Zobaczmy, jak to wyglÄ…da na przykÅ‚adach. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Goal</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span> : <span class="id" title="keyword">Prop</span>, <span class="id" title="var">P</span> -&gt; <span class="id" title="var">Q</span> -&gt; <span class="id" title="var">R</span> -&gt; <span class="id" title="var">S</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">x</span> : <span class="id" title="keyword">Prop</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
W powyÅ¼szym przykÅ‚adzie szukamy w celu zdaÅ„ logicznych, czyli termÃ³w
    typu <span class="inlinecode"><span class="id" title="keyword">Prop</span></span> i wypisujemy je. Nazwy szukanych obiektÃ³w sÄ… lokalne dla
    kaÅ¼dej gaÅ‚Ä™zi dopasowania i nie muszÄ… pokrywaÄ‡ siÄ™ z rzeczywistymi
    nazwami termÃ³w w kontekÅ›cie. W naszym przypadku nazywamy szukane przez
    nas zdanie <span class="inlinecode"><span class="id" title="var">x</span></span>, choÄ‡ zdania obecne w naszym kontekÅ›cie tak naprawdÄ™
    nazywajÄ… siÄ™ <span class="inlinecode"><span class="id" title="var">P</span></span>, <span class="inlinecode"><span class="id" title="var">Q</span></span>, <span class="inlinecode"><span class="id" title="var">R</span></span> oraz <span class="inlinecode"><span class="id" title="var">S</span></span>.

<div class="paragraph"> </div>

    Przeszukiwanie obiektÃ³w w kontekÅ›cie odbywa siÄ™ w kolejnoÅ›ci od
    najnowszego do najstarszego. Do wzorca <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span></span> najpierw prÃ³bujemy
    dopasowaÄ‡ <span class="inlinecode"><span class="id" title="var">H1</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">R</span></span>, ale <span class="inlinecode"><span class="id" title="var">R</span></span> to nie <span class="inlinecode"><span class="id" title="keyword">Prop</span></span>, wiÄ™c dopasowanie zawodzi.
    Podobnie dla <span class="inlinecode"><span class="id" title="var">H0</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">Q</span></span> oraz <span class="inlinecode"><span class="id" title="var">H</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">P</span></span>. NastÄ™pnie natrafiamy na <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span></span>,
    ktÃ³re pasuje do wzorca. DziÄ™ki temu na prawo od strzaÅ‚ki <span class="inlinecode">=&gt;</span> nazwa <span class="inlinecode"><span class="id" title="var">x</span></span>
    odnosi siÄ™ do dopasowanego zdania <span class="inlinecode"><span class="id" title="var">S</span></span>. Za pomocÄ… taktyki <span class="inlinecode"><span class="id" title="tactic">idtac</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span>
    wyÅ›wietlamy <span class="inlinecode"><span class="id" title="var">x</span></span> i faktycznie odnosi siÄ™ on do <span class="inlinecode"><span class="id" title="var">S</span></span>. Po skutecznym
    dopasowaniu i wykonaniu taktyki <span class="inlinecode"><span class="id" title="tactic">idtac</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> caÅ‚y <span class="inlinecode"><span class="id" title="keyword">match</span></span> koÅ„czy siÄ™
    sukcesem. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Goal</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span> : <span class="id" title="keyword">Prop</span>, <span class="id" title="var">P</span> -&gt; <span class="id" title="var">Q</span> -&gt; <span class="id" title="var">R</span> -&gt; <span class="id" title="var">S</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Fail</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">x</span> : <span class="id" title="keyword">Prop</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">fail</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
W tym przykÅ‚adzie podobnie jak wyÅ¼ej szukamy w kontekÅ›cie zdaÅ„ logicznych,
    ale taktyka po prawej od <span class="inlinecode">=&gt;</span> zawodzi. <span class="inlinecode"><span class="id" title="keyword">match</span></span> dziaÅ‚a tutaj nastÄ™pujÄ…co:
<ul class="doclist">
<li> prÃ³bujemy do wzorca <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span></span> dopasowaÄ‡ <span class="inlinecode"><span class="id" title="var">H1</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">R</span></span>, ale bez powodzenia
      i podobnie dla <span class="inlinecode"><span class="id" title="var">H0</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">Q</span></span> oraz <span class="inlinecode"><span class="id" title="var">H</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">P</span></span>.

</li>
<li> znajdujemy dopasowanie <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span></span>. Taktyka <span class="inlinecode"><span class="id" title="tactic">idtac</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> wypisuje do okna
      Messages wiadomoÅ›Ä‡ "S" i koÅ„czy siÄ™ sukcesem, ale <span class="inlinecode"><span class="id" title="tactic">fail</span></span> zawodzi.

</li>
<li> Wobec powyÅ¼szego prÃ³bujemy kolejnego dopasowania, tym razem <span class="inlinecode"><span class="id" title="var">R</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span></span>,
      ktÃ³re pasuje. <span class="inlinecode"><span class="id" title="tactic">idtac</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> wypisuje na ekran "R", ale <span class="inlinecode"><span class="id" title="tactic">fail</span></span> znÃ³w
      zawodzi.

</li>
<li> PrÃ³bujemy kolejno dopasowaÅ„ <span class="inlinecode"><span class="id" title="var">Q</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span></span> i <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span></span>, w wyniku ktÃ³rych
      wypisane zostaje "Q" oraz "P", ale rÃ³wnieÅ¼ w tych dwÃ³ch przypadkach
      taktyka <span class="inlinecode"><span class="id" title="tactic">fail</span></span> zawodzi.

</li>
<li> Nie ma wiÄ™cej potencjalnych dopasowaÅ„, wiÄ™c caÅ‚y <span class="inlinecode"><span class="id" title="keyword">match</span></span> zawodzi. 
</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Goal</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span> : <span class="id" title="keyword">Prop</span>, <span class="id" title="var">P</span> -&gt; <span class="id" title="var">Q</span> -&gt; <span class="id" title="var">R</span> -&gt; <span class="id" title="var">S</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Fail</span> <span class="id" title="keyword">match</span> <span class="id" title="var">reverse</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">x</span> : <span class="id" title="keyword">Prop</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">fail</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
Ten przykÅ‚ad jest podobny do ostatniego, ale <span class="inlinecode"><span class="id" title="keyword">match</span></span> <span class="inlinecode"><span class="id" title="var">reverse</span></span> przeszukuje
    kontekst w kolejnoÅ›ci od najstarszego do najnowszego. DziÄ™ki temu od razu
    natrafiamy na dopasowanie <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span></span>, potem na <span class="inlinecode"><span class="id" title="var">Q</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span></span> etc. Na samym
    koÅ„cu prÃ³bujemy do <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span></span> dopasowaÄ‡ <span class="inlinecode"><span class="id" title="var">H</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">P</span></span>, <span class="inlinecode"><span class="id" title="var">H0</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">Q</span></span> i <span class="inlinecode"><span class="id" title="var">H1</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">R</span></span>, co
    koÅ„czy siÄ™ niepowodzeniem.

<div class="paragraph"> </div>

    ZauwaÅ¼my, Å¼e w dwÃ³ch ostatnich przykÅ‚adach nie wystÄ…piÅ‚ backtracking â€”
    <span class="inlinecode"><span class="id" title="keyword">match</span></span> nigdy nie wyzwala backtrackingu. Obserwowane dziaÅ‚anie <span class="inlinecode"><span class="id" title="keyword">match</span></span>a
    wynika stÄ…d, Å¼e jeÅ¼eli taktyka po prawej od <span class="inlinecode">=&gt;</span> zawiedzie, to nastÄ™puje
    prÃ³ba znalezienia jakiegoÅ› innego dopasowania wzorca <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span></span>. Dopiero
    gdy taktyka na prawo od <span class="inlinecode">=&gt;</span> zawiedzie dla wszystkich moÅ¼liwych takich
    dopasowaÅ„, caÅ‚y <span class="inlinecode"><span class="id" title="keyword">match</span></span> zawodzi. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Goal</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span> : <span class="id" title="keyword">Prop</span>, <span class="id" title="var">P</span> -&gt; <span class="id" title="var">Q</span> -&gt; <span class="id" title="var">R</span> -&gt; <span class="id" title="var">S</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Fail</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">x</span> : <span class="id" title="keyword">Prop</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">fail</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
Ten przykÅ‚ad potwierdza naszÄ… powyÅ¼szÄ… obserwacjÄ™ dotyczÄ…cÄ… backtrackingu.
    Mamy tutaj identyczne dopasowanie jak w pierwszym przykÅ‚adzie â€” wypisuje
    ono <span class="inlinecode"><span class="id" title="var">S</span></span> i koÅ„czy siÄ™ sukcesem, ale tuÅ¼ po nim nastÄ™puje taktyka <span class="inlinecode"><span class="id" title="tactic">fail</span></span>,
    przez co caÅ‚a taktyka <span class="inlinecode"><span class="id" title="keyword">match</span></span> <span class="inlinecode">...;</span> <span class="inlinecode"><span class="id" title="tactic">fail</span></span> zawodzi. Jak widaÄ‡, nie nastÄ™puje
    prÃ³ba ponownego dopasownia wzorca <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span></span>. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Goal</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span> : <span class="id" title="keyword">Prop</span>, <span class="id" title="var">P</span> -&gt; <span class="id" title="var">Q</span> -&gt; <span class="id" title="var">R</span> -&gt; <span class="id" title="var">S</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Fail</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">lazymatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">x</span> : <span class="id" title="keyword">Prop</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span> <span class="id" title="var">x</span>; <span class="id" title="tactic">fail</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
Konstrukt <span class="inlinecode"><span class="id" title="keyword">lazymatch</span></span> rÃ³Å¼ni siÄ™ od <span class="inlinecode"><span class="id" title="keyword">match</span></span>a tym, Å¼e jeÅ¼eli taktyka na
    prawo od <span class="inlinecode">=&gt;</span> zawiedzie, to alternatywne dopasowania wzorca po lewej
    nie bÄ™dÄ… rozwaÅ¼ane i nastÄ…pi przejÅ›cie do kolejnej gaÅ‚Ä™zi dopasowania.
    W naszym przypadku nie ma kolejnych gaÅ‚Ä™zi, wiÄ™c po pierwszym dopasowaniu
    <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span></span> do <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span></span> i wypisaniu "S" caÅ‚y <span class="inlinecode"><span class="id" title="keyword">lazymatch</span></span> zawodzi. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Goal</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span> : <span class="id" title="keyword">Prop</span>, <span class="id" title="var">P</span> -&gt; <span class="id" title="var">Q</span> -&gt; <span class="id" title="var">R</span> -&gt; <span class="id" title="var">S</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Fail</span><br/>
&nbsp;&nbsp;<span class="id" title="var">multimatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">x</span> : <span class="id" title="keyword">Prop</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>; <span class="id" title="tactic">fail</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
<span class="inlinecode"><span class="id" title="var">multimatch</span></span> to wariant <span class="inlinecode"><span class="id" title="keyword">match</span></span>a, ktÃ³ry wyzwala backtracking. W powyÅ¼szym
    przykÅ‚adzie dziaÅ‚a on nastÄ™pujÄ…co:
<ul class="doclist">
<li> do wzorca <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span></span> dopasowujemy <span class="inlinecode"><span class="id" title="var">H1</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">R</span></span>, a nastÄ™pnie <span class="inlinecode"><span class="id" title="var">H0</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">Q</span></span> i
      <span class="inlinecode"><span class="id" title="var">H</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">P</span></span>, co siÄ™ rzecz jasna nie udaje.

</li>
<li> Znajdujemy dopasowanie <span class="inlinecode"><span class="id" title="var">S</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span></span> i caÅ‚y <span class="inlinecode"><span class="id" title="var">multimatch</span></span> koÅ„czy siÄ™
      sukcesem.

</li>
<li> Taktyka <span class="inlinecode"><span class="id" title="tactic">fail</span></span> zawodzi i wobec tego caÅ‚a taktyka <span class="inlinecode"><span class="id" title="var">multimatch</span></span> <span class="inlinecode">...;</span> <span class="inlinecode"><span class="id" title="tactic">fail</span></span>
      taÅ¼e zawodzi.

</li>
<li> NastÄ™puje nawrÃ³t i znÃ³w prÃ³bujemy znaleÅºÄ‡ dopasowanie wzorca <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span></span>.
      Znajdujemy <span class="inlinecode"><span class="id" title="var">R</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span></span>, <span class="inlinecode"><span class="id" title="var">multimatch</span></span> koÅ„czy siÄ™ sukcesem, ale <span class="inlinecode"><span class="id" title="tactic">fail</span></span>
      zawodzi.

</li>
<li> NastÄ™pujÄ… kolejne nawroty i dopasowania do wzorca. Ostatecznie po
      wyczerpaniu siÄ™ wszystkich moÅ¼liwoÅ›Ä‡ caÅ‚a taktyka zawodzi. 
</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Goal</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span> : <span class="id" title="keyword">Prop</span>, <span class="id" title="var">P</span> -&gt; <span class="id" title="var">Q</span> -&gt; <span class="id" title="var">R</span> -&gt; <span class="id" title="var">S</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">x</span> : <span class="id" title="keyword">Prop</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">multimatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">x</span> : <span class="id" title="keyword">Prop</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">x</span> : <span class="id" title="keyword">Prop</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">multimatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">x</span> : <span class="id" title="keyword">Prop</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
Przyjrzyjmy siÄ™ jeszcze rÃ³Å¼nicy w zachowaniach <span class="inlinecode"><span class="id" title="keyword">match</span></span>a i <span class="inlinecode"><span class="id" title="var">multimatch</span></span>a
    w poÅ‚Ä…czeniu z kombinatorem <span class="inlinecode"><span class="id" title="tactic">repeat</span></span>. Bez <span class="inlinecode"><span class="id" title="tactic">repeat</span></span> oba dopasowania
    zachowujÄ… siÄ™ identycznie. UÅ¼ycie <span class="inlinecode"><span class="id" title="tactic">repeat</span></span> przed <span class="inlinecode"><span class="id" title="keyword">match</span></span> nie zmienia w
    tym konkretnym wypadku jego dziaÅ‚ania, ale w przypadku <span class="inlinecode"><span class="id" title="var">multimatch</span></span>a
    uÅ¼ycie <span class="inlinecode"><span class="id" title="tactic">repeat</span></span> ujawnia wszystkie jego sukcesy.

<div class="paragraph"> </div>

    Å¹rÃ³dÅ‚o rÃ³Å¼nego zachowania <span class="inlinecode"><span class="id" title="keyword">match</span></span>a i <span class="inlinecode"><span class="id" title="var">multimatch</span></span>a, jeÅ¼eli chodzi o
    backtracking, jest bardzo proste: tak naprawdÄ™ <span class="inlinecode"><span class="id" title="keyword">match</span></span> jest jedynie
    skrÃ³tem dla <span class="inlinecode"><span class="id" title="var">once</span></span> <span class="inlinecode"><span class="id" title="var">multimatch</span></span>. <span class="inlinecode"><span class="id" title="keyword">lazymatch</span></span>, choÄ‡ nie pokazano tego
    na powyÅ¼szym przykÅ‚adzie, w obu wypadkach (z <span class="inlinecode"><span class="id" title="tactic">repeat</span></span> i bez) zachowujÄ™
    siÄ™ tak jak <span class="inlinecode"><span class="id" title="keyword">match</span></span>.

<div class="paragraph"> </div>

    Przyjrzyjmy siÄ™ teraz dopasowaniom celu. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Goal</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span> : <span class="id" title="keyword">Prop</span>) (<span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> : <span class="id" title="var">nat</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;42 = 43 /\ (<span class="id" title="var">P</span> -&gt; <span class="id" title="var">Q</span>).<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="tactic">split</span>;<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">X</span> : <span class="id" title="keyword">Prop</span> |- <span class="id" title="var">P</span> -&gt; <span class="id" title="var">Q</span> =&gt; <span class="id" title="tactic">idtac</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">n</span> : <span class="id" title="var">nat</span> |- 42 = 43 =&gt; <span class="id" title="tactic">idtac</span> <span class="id" title="var">n</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
Dopasowanie celu jest jeszcze prostsze niÅ¼ dopasowanie hipotezy, bo
    cel jest tylko jeden i wobec tego nie trzeba dawaÄ‡ mu Å¼adnej nazwy.
    PowyÅ¼sza taktyka <span class="inlinecode"><span class="id" title="tactic">split</span>;</span> <span class="inlinecode"><span class="id" title="keyword">match</span></span> <span class="inlinecode">...</span> dziaÅ‚a nastÄ™pujÄ…co:
<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="tactic">split</span></span> generuje dwa podcele i wobec tego <span class="inlinecode"><span class="id" title="keyword">match</span></span> dziaÅ‚a na
      kaÅ¼dym z nich z osobna

</li>
<li> pierwszy wzorzec gÅ‚osi, Å¼e jeÅ¼eli w kontekÅ›cie jest jakieÅ› zdanie
      logiczne, ktÃ³re nazywamy <span class="inlinecode"><span class="id" title="var">X</span></span>, a cel jest postaci <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">Q</span></span>, to
      wypisujemy <span class="inlinecode"><span class="id" title="var">X</span></span>

</li>
<li> drugi wzorzec gÅ‚osi, Å¼e jeÅ¼eli w kontekÅ›cie jest jakaÅ› liczba
      naturalna, ktÃ³rÄ… nazywamy <span class="inlinecode"><span class="id" title="var">n</span></span>, a cel jest postaci <span class="inlinecode">42</span> <span class="inlinecode">=</span> <span class="inlinecode">43</span>, to
      wypisujemy <span class="inlinecode"><span class="id" title="var">n</span></span>

</li>
<li> nastÄ™puje prÃ³ba dopasowania pierwszego wzorca do pierwszego podcelu.
      Mimo, Å¼e w kontekÅ›cie sÄ… zdania logiczne, to cel nie jest postaci
      <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">Q</span></span>, a zatem dopasowanie zawodzi.

</li>
<li> nastÄ™puje prÃ³ba dopasowania drugiego wzorca do pierwszego podcelu.
      W kontekÅ›cie jest liczba naturalna i cel jest postaci <span class="inlinecode">42</span> <span class="inlinecode">=</span> <span class="inlinecode">43</span>, a
      zatem dopasowanie udaje siÄ™. Do okna Messages zostaje wypisane "c",
      ktÃ³re zostaÅ‚o dopasowane jako pierwsze, gdyÅ¼ kontekst jest przeglÄ…dany
      w kolejnoÅ›ci od najstarszej hipotezy do najÅ›wieÅ¼szej.

</li>
<li> pierwszy wzorzec zostaje z powodzeniem dopasowany do drugiego podcelu
      i do okna Messages zostaje wypisane "S". 
</li>
</ul>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Goal</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span> : <span class="id" title="keyword">Prop</span>) (<span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> : <span class="id" title="var">nat</span>), <span class="id" title="var">P</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span> "-_-"<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">fail</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">X</span> : <span class="id" title="keyword">Prop</span> |- <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span> <span class="id" title="var">X</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
PozostaÅ‚o nam jedynie zademonstrowaÄ‡ dziaÅ‚anie wzorca <span class="inlinecode"><span class="id" title="var">_</span></span>. Pierwsza z
    powyÅ¼szych taktyk z sukcesem dopasowuje wzorzec <span class="inlinecode"><span class="id" title="var">_</span></span> (gdyÅ¼ pasuje on do
    kaÅ¼dego kontekstu i celu) i wobec tego do okna Messages zostaje wypisany
    napis "-_-".

<div class="paragraph"> </div>

    W drugim <span class="inlinecode"><span class="id" title="keyword">match</span></span>u rÃ³wnieÅ¼ zostaje dopasowany wzorzec <span class="inlinecode"><span class="id" title="var">_</span></span>, ale taktyka
    <span class="inlinecode"><span class="id" title="tactic">fail</span></span> zawodzi i nastÄ™puje przejÅ›cie do kolejnego wzorca, ktÃ³ry takÅ¼e
    pasuje. Wobec tego wypisane zostaje "S". Przypomina to nam o tym, Å¼e
    kolejnoÅ›Ä‡ wzorcÃ³w ma znaczenie i to nawet w przypadku, gdy ktÃ³ryÅ› z
    nich (tak jak <span class="inlinecode"><span class="id" title="var">_</span></span>) pasuje do wszystkiego. 
<div class="paragraph"> </div>

<a name="lab459"></a><h4 class="section">Ä†wiczenie (destr_and)</h4>

<div class="paragraph"> </div>

 Napisz taktykÄ™ <span class="inlinecode"><span class="id" title="var">destr_and</span></span>, ktÃ³ra rozbija wszystkie koniunkcje, ktÃ³re
    znajdzie w kontekÅ›cie, a nastÄ™pnie udowodni cel, jeÅ¼eli zachodzi on na
    mocy zaÅ‚oÅ¼enia.

<div class="paragraph"> </div>

    Dla przykÅ‚adu, kontekst <span class="inlinecode"><span class="id" title="var">H</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">/\</span> <span class="inlinecode"><span class="id" title="var">Q</span></span> <span class="inlinecode">/\</span> <span class="inlinecode"><span class="id" title="var">R</span></span> <span class="inlinecode">|-</span> <span class="inlinecode"><span class="id" title="var">_</span></span> powinien zostaÄ‡
    przeksztaÅ‚cony w <span class="inlinecode"><span class="id" title="var">H</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">P</span>,</span> <span class="inlinecode"><span class="id" title="var">H0</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">Q</span>,</span> <span class="inlinecode"><span class="id" title="var">H1</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">R</span></span>.

<div class="paragraph"> </div>

    JeÅ¼eli to moÅ¼liwe, nie uÅ¼ywaj kombinatora <span class="inlinecode">;</span> 
</div>
<div class="code">

<br/>

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">destr_and</span>.<br/>

<br/>
<span class="id" title="keyword">Hypotheses</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span> <span class="id" title="var">E</span> <span class="id" title="var">F</span> <span class="id" title="var">G</span> <span class="id" title="var">H</span> <span class="id" title="var">I</span> <span class="id" title="var">J</span> : <span class="id" title="keyword">Prop</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">destruct_0</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">A</span> /\ <span class="id" title="var">B</span> /\ <span class="id" title="var">C</span> /\ <span class="id" title="var">D</span> /\ <span class="id" title="var">E</span> /\ <span class="id" title="var">F</span> /\ <span class="id" title="var">G</span> /\ <span class="id" title="var">H</span> /\ <span class="id" title="var">I</span> /\ <span class="id" title="var">J</span> -&gt; <span class="id" title="var">D</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">destr_and</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">destruct_1</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;((((((((<span class="id" title="var">A</span> /\ <span class="id" title="var">B</span>) /\ <span class="id" title="var">C</span>) /\ <span class="id" title="var">D</span>) /\ <span class="id" title="var">E</span>) /\ <span class="id" title="var">F</span>) /\ <span class="id" title="var">G</span>) /\ <span class="id" title="var">H</span>) /\ <span class="id" title="var">I</span>) /\ <span class="id" title="var">J</span> -&gt; <span class="id" title="var">F</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">destr_and</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">destruct_2</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">A</span> /\ ~ <span class="id" title="var">B</span> /\ (<span class="id" title="var">C</span> \/ <span class="id" title="var">C</span> \/ <span class="id" title="var">C</span> \/ <span class="id" title="var">C</span>) /\ ((((<span class="id" title="var">D</span> /\ <span class="id" title="var">I</span>) /\ <span class="id" title="var">I</span>) /\ <span class="id" title="var">I</span>) /\ <span class="id" title="var">J</span>) -&gt; <span class="id" title="var">I</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">destr_and</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">destr_and</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab460"></a><h4 class="section">Ä†wiczenie (solve_and_perm)</h4>

<div class="paragraph"> </div>

 Napisz taktykÄ™ <span class="inlinecode"><span class="id" title="var">solve_and_perm</span></span>, ktÃ³ra bÄ™dzie potrafiÅ‚a rozwiÄ…zywaÄ‡
    cele postaci <span class="inlinecode"><span class="id" title="var">P_1</span></span> <span class="inlinecode">/\</span> <span class="inlinecode"><span class="id" title="var">P_2</span></span> <span class="inlinecode">/\</span> <span class="inlinecode">...</span> <span class="inlinecode">/\</span> <span class="inlinecode"><span class="id" title="var">P_n</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">P_i1</span></span> <span class="inlinecode">/\</span> <span class="inlinecode"><span class="id" title="var">P_i2</span></span> <span class="inlinecode">/\</span> <span class="inlinecode">...</span> <span class="inlinecode">/\</span> <span class="inlinecode"><span class="id" title="var">P_iN</span></span>,
    gdzie prawa strona implikacji jest permutacjÄ… lewej strony, tzn. sÄ… w
    niej te same zdania, ale wystÄ™pujÄ…ce w innej kolejnoÅ›ci. 
</div>
<div class="code">

<br/>

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">solve_and_perm</span>.<br/>

<br/>
<span class="id" title="keyword">Hypotheses</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span> <span class="id" title="var">E</span> <span class="id" title="var">F</span> <span class="id" title="var">G</span> <span class="id" title="var">H</span> <span class="id" title="var">I</span> <span class="id" title="var">J</span> : <span class="id" title="keyword">Prop</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">and_perm_0</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">A</span> /\ <span class="id" title="var">B</span> /\ <span class="id" title="var">C</span> /\ <span class="id" title="var">D</span> /\ <span class="id" title="var">E</span> /\ <span class="id" title="var">F</span> /\ <span class="id" title="var">G</span> /\ <span class="id" title="var">H</span> /\ <span class="id" title="var">I</span> /\ <span class="id" title="var">J</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">J</span> /\ <span class="id" title="var">I</span> /\ <span class="id" title="var">H</span> /\ <span class="id" title="var">G</span> /\ <span class="id" title="var">F</span> /\ <span class="id" title="var">E</span> /\ <span class="id" title="var">D</span> /\ <span class="id" title="var">C</span> /\ <span class="id" title="var">B</span> /\ <span class="id" title="var">A</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_and_perm</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">and_perm_1</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">A</span> /\ <span class="id" title="var">B</span> /\ <span class="id" title="var">C</span> /\ <span class="id" title="var">D</span> /\ <span class="id" title="var">E</span> /\ <span class="id" title="var">F</span> /\ <span class="id" title="var">G</span> /\ <span class="id" title="var">H</span> /\ <span class="id" title="var">I</span> /\ <span class="id" title="var">J</span> -&gt;<br/>
&nbsp;&nbsp;(((((((((<span class="id" title="var">A</span> /\ <span class="id" title="var">B</span>) /\ <span class="id" title="var">C</span>) /\ <span class="id" title="var">D</span>) /\ <span class="id" title="var">E</span>) /\ <span class="id" title="var">F</span>) /\ <span class="id" title="var">G</span>) /\ <span class="id" title="var">H</span>) /\ <span class="id" title="var">I</span>) /\ <span class="id" title="var">J</span>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_and_perm</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">and_perm_2</span> :<br/>
&nbsp;&nbsp;(<span class="id" title="var">A</span> /\ <span class="id" title="var">B</span>) /\ (<span class="id" title="var">C</span> /\ (<span class="id" title="var">D</span> /\ <span class="id" title="var">E</span>)) /\ (((<span class="id" title="var">F</span> /\ <span class="id" title="var">G</span>) /\ <span class="id" title="var">H</span>) /\ <span class="id" title="var">I</span>) /\ <span class="id" title="var">J</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id" title="var">I</span> /\ <span class="id" title="var">I</span> /\ <span class="id" title="var">J</span>) /\ ((<span class="id" title="var">A</span> /\ <span class="id" title="var">B</span> /\ (<span class="id" title="var">A</span> /\ <span class="id" title="var">B</span>)) /\ <span class="id" title="var">J</span>) /\ (<span class="id" title="var">C</span> /\ (<span class="id" title="var">E</span> /\ (<span class="id" title="var">D</span> /\ <span class="id" title="var">F</span> /\ <span class="id" title="var">F</span>))).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_and_perm</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">solve_and_perm</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab461"></a><h4 class="section">Ä†wiczenie (solve_or_perm)</h4>

<div class="paragraph"> </div>

 Napisz taktykÄ™ <span class="inlinecode"><span class="id" title="var">solve_or_perm</span></span>, ktÃ³ra bÄ™dzie potrafiÅ‚a rozwiÄ…zywaÄ‡
    cele postaci <span class="inlinecode"><span class="id" title="var">P_1</span></span> <span class="inlinecode">\/</span> <span class="inlinecode"><span class="id" title="var">P_2</span></span> <span class="inlinecode">\/</span> <span class="inlinecode">...</span> <span class="inlinecode">\/</span> <span class="inlinecode"><span class="id" title="var">P_n</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">P_i1</span></span> <span class="inlinecode">\/</span> <span class="inlinecode"><span class="id" title="var">P_i2</span></span> <span class="inlinecode">\/</span> <span class="inlinecode">...</span> <span class="inlinecode">\/</span> <span class="inlinecode"><span class="id" title="var">P_iN</span></span>,
    gdzie prawa strona implikacji jest permutacjÄ… lewej strony, tzn. sÄ…
    w niej te same zdania, ale wystÄ™pujÄ…ce w innej kolejnoÅ›ci.

<div class="paragraph"> </div>

    WskazÃ³wka: wykorzystaj taktykÄ™ <span class="inlinecode"><span class="id" title="var">search</span></span> z jednego z poprzednich
    Ä‡wiczeÅ„. 
</div>
<div class="code">

<br/>

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">solve_or_perm</span>.<br/>

<br/>
<span class="id" title="keyword">Hypotheses</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> <span class="id" title="var">C</span> <span class="id" title="var">D</span> <span class="id" title="var">E</span> <span class="id" title="var">F</span> <span class="id" title="var">G</span> <span class="id" title="var">H</span> <span class="id" title="var">I</span> <span class="id" title="var">J</span> : <span class="id" title="keyword">Prop</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">or_perm_0</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">A</span> \/ <span class="id" title="var">B</span> \/ <span class="id" title="var">C</span> \/ <span class="id" title="var">D</span> \/ <span class="id" title="var">E</span> \/ <span class="id" title="var">F</span> \/ <span class="id" title="var">G</span> \/ <span class="id" title="var">H</span> \/ <span class="id" title="var">I</span> \/ <span class="id" title="var">J</span> -&gt;<br/>
&nbsp;&nbsp;<span class="id" title="var">J</span> \/ <span class="id" title="var">I</span> \/ <span class="id" title="var">H</span> \/ <span class="id" title="var">G</span> \/ <span class="id" title="var">F</span> \/ <span class="id" title="var">E</span> \/ <span class="id" title="var">D</span> \/ <span class="id" title="var">C</span> \/ <span class="id" title="var">B</span> \/ <span class="id" title="var">A</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_or_perm</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">or_perm_1</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">A</span> \/ <span class="id" title="var">B</span> \/ <span class="id" title="var">C</span> \/ <span class="id" title="var">D</span> \/ <span class="id" title="var">E</span> \/ <span class="id" title="var">F</span> \/ <span class="id" title="var">G</span> \/ <span class="id" title="var">H</span> \/ <span class="id" title="var">I</span> \/ <span class="id" title="var">J</span> -&gt;<br/>
&nbsp;&nbsp;(((((((((<span class="id" title="var">A</span> \/ <span class="id" title="var">B</span>) \/ <span class="id" title="var">C</span>) \/ <span class="id" title="var">D</span>) \/ <span class="id" title="var">E</span>) \/ <span class="id" title="var">F</span>) \/ <span class="id" title="var">G</span>) \/ <span class="id" title="var">H</span>) \/ <span class="id" title="var">I</span>) \/ <span class="id" title="var">J</span>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_or_perm</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">or_perm_2</span> :<br/>
&nbsp;&nbsp;(<span class="id" title="var">A</span> \/ <span class="id" title="var">B</span>) \/ (<span class="id" title="var">C</span> \/ (<span class="id" title="var">D</span> \/ <span class="id" title="var">E</span>)) \/ (((<span class="id" title="var">F</span> \/ <span class="id" title="var">G</span>) \/ <span class="id" title="var">H</span>) \/ <span class="id" title="var">I</span>) \/ <span class="id" title="var">J</span> -&gt;<br/>
&nbsp;&nbsp;(<span class="id" title="var">I</span> \/ <span class="id" title="var">H</span> \/ <span class="id" title="var">J</span>) \/ ((<span class="id" title="var">A</span> \/ <span class="id" title="var">B</span> \/ (<span class="id" title="var">G</span> \/ <span class="id" title="var">B</span>)) \/ <span class="id" title="var">J</span>) \/ (<span class="id" title="var">C</span> \/ (<span class="id" title="var">E</span> \/ (<span class="id" title="var">D</span> \/ <span class="id" title="var">F</span> \/ <span class="id" title="var">F</span>))).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_or_perm</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">or_perm_3</span> :<br/>
&nbsp;&nbsp;<span class="id" title="var">A</span> \/ <span class="id" title="var">B</span> \/ <span class="id" title="var">C</span> \/ <span class="id" title="var">D</span> \/ <span class="id" title="var">E</span> \/ <span class="id" title="var">F</span> \/ <span class="id" title="var">G</span> \/ <span class="id" title="var">H</span> \/ <span class="id" title="var">I</span> \/ <span class="id" title="var">J</span> -&gt;<br/>
&nbsp;&nbsp;(((((((((<span class="id" title="var">A</span> \/ <span class="id" title="var">B</span>) \/ <span class="id" title="var">C</span>) \/ <span class="id" title="var">D</span>) \/ <span class="id" title="var">E</span>) \/ <span class="id" title="var">F</span>) \/ <span class="id" title="var">G</span>) \/ <span class="id" title="var">H</span>) \/ <span class="id" title="var">I</span>) \/ <span class="id" title="var">J</span>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">solve_or_perm</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">solve_or_perm</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab462"></a><h4 class="section">Ä†wiczenie (negn)</h4>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <span class="id" title="var">negn</span>.<br/>

<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="var">Arith</span>.<br/>

<br/>
</div>

<div class="doc">
Napisz funkcjÄ™ <span class="inlinecode"><span class="id" title="var">negn</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">nat</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span></span>, gdzie <span class="inlinecode"><span class="id" title="var">negn</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode"><span class="id" title="var">P</span></span> zwraca
    zdanie <span class="inlinecode"><span class="id" title="var">P</span></span> zanegowane <span class="inlinecode"><span class="id" title="var">n</span></span> razy. 
</div>
<div class="code">

<br/>

<br/>
<span class="id" title="keyword">Eval</span> <span class="id" title="var">cbn</span> <span class="id" title="tactic">in</span> <span class="id" title="var">negn</span> 10 <span class="id" title="var">True</span>.<br/>
<span class="comment">(*&nbsp;===&gt;&nbsp;=&nbsp;~&nbsp;~&nbsp;~&nbsp;~&nbsp;~&nbsp;~&nbsp;~&nbsp;~&nbsp;~&nbsp;~&nbsp;True&nbsp;:&nbsp;Prop&nbsp;*)</span><br/>

<br/>
</div>

<div class="doc">
Udowodnij poniÅ¼sze lematy. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">dbl_neg</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Prop</span>, <span class="id" title="var">P</span> -&gt; ~ ~ <span class="id" title="var">P</span>.<br/>

<br/>
<span class="id" title="keyword">Lemma</span> <span class="id" title="var">double_n</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, 2 * <span class="id" title="var">n</span> = <span class="id" title="var">n</span> + <span class="id" title="var">n</span>.<br/>

<br/>
</div>

<div class="doc">
PrzydadzÄ… ci siÄ™ one do pokazania dwÃ³ch wÅ‚aÅ›ciwoÅ›ci fukncji <span class="inlinecode"><span class="id" title="var">negn</span></span>.
    Zanim przystÄ…pisz do dowodzenia drugiego z nich, sprÃ³buj zgadnÄ…Ä‡,
    po ktÃ³rym argumencie najproÅ›ciej bÄ™dzie przeprowadziÄ‡ indukcjÄ™. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">even_neg</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">n</span> : <span class="id" title="var">nat</span>) (<span class="id" title="var">P</span> : <span class="id" title="keyword">Prop</span>), <span class="id" title="var">P</span> -&gt; <span class="id" title="var">negn</span> (2 * <span class="id" title="var">n</span>) <span class="id" title="var">P</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">even_neg'</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> (<span class="id" title="var">n</span> <span class="id" title="var">k</span> : <span class="id" title="var">nat</span>) (<span class="id" title="var">P</span> : <span class="id" title="keyword">Prop</span>),<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">negn</span> (2 * <span class="id" title="var">n</span>) <span class="id" title="var">P</span> -&gt; <span class="id" title="var">negn</span> (2 * (<span class="id" title="var">n</span> + <span class="id" title="var">k</span>)) <span class="id" title="var">P</span>.<br/>

<br/>
</div>

<div class="doc">
Napisz taktykÄ™ <span class="inlinecode"><span class="id" title="var">negtac</span></span>, ktÃ³ra bÄ™dzie potrafiÅ‚a udowadniaÄ‡ cele postaci
    <span class="inlinecode"><span class="id" title="keyword">forall</span></span> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="keyword">Prop</span>,</span> <span class="inlinecode"><span class="id" title="var">negn</span></span> <span class="inlinecode">(2</span> <span class="inlinecode">*</span> <span class="inlinecode"><span class="id" title="var">n</span>)</span> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">negn</span></span> <span class="inlinecode">(2</span> <span class="inlinecode">*</span> <span class="inlinecode">(<span class="id" title="var">n</span></span> <span class="inlinecode">+</span> <span class="inlinecode"><span class="id" title="var">k</span>))</span> <span class="inlinecode"><span class="id" title="var">P</span></span>, gdzie
    <span class="inlinecode"><span class="id" title="var">n</span></span> oraz <span class="inlinecode"><span class="id" title="var">k</span></span> sÄ… staÅ‚ymi. Nie uÅ¼ywaj twierdzeÅ„, ktÃ³re udowodniÅ‚eÅ› wyÅ¼ej.

<div class="paragraph"> </div>

    WskazÃ³wka: przydatny moÅ¼e byc konstrukt <span class="inlinecode"><span class="id" title="keyword">match</span></span> <span class="inlinecode"><span class="id" title="var">reverse</span></span> <span class="inlinecode"><span class="id" title="keyword">goal</span></span>. 
</div>
<div class="code">

<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">neg_2_14</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Prop</span>, <span class="id" title="var">negn</span> 2 <span class="id" title="var">P</span> -&gt; <span class="id" title="var">negn</span> 14 <span class="id" title="var">P</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">negtac</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">neg_100_200</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Prop</span>, <span class="id" title="var">negn</span> 100 <span class="id" title="var">P</span> -&gt; <span class="id" title="var">negn</span> 200 <span class="id" title="var">P</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">negtac</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Theorem</span> <span class="id" title="var">neg_42_1000</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Prop</span>, <span class="id" title="var">negn</span> 42 <span class="id" title="var">P</span> -&gt; <span class="id" title="var">negn</span> 200 <span class="id" title="var">P</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">negtac</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <span class="id" title="var">negn</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab463"></a><h1 class="section">Wzorce i unifikacja</h1>

<div class="paragraph"> </div>

 Skoro wiemy juÅ¼ jak dziaÅ‚a dopasowywanie kontekstu do wzorca, czas
    nauczyÄ‡ siÄ™ jak dokÅ‚adnie dziaÅ‚ajÄ… wzorce oraz czym sÄ… zmienne
    unifikacyjne i sama unifikacja.

<div class="paragraph"> </div>

    Przede wszystkim, jak przekonaliÅ›my siÄ™ wyÅ¼ej, termy sÄ… wzorcami.
    Termy nie zawierajÄ… zmiennych unifikacyjnych, a wzorce bÄ™dÄ…ce
    termami dopasowujÄ… siÄ™ tylko do identycznych termÃ³w. Dopasowanie
    takie nie wiÄ…Å¼e Å¼adnych nowych zmiennych. Zobaczmy to na przykÅ‚adzie. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Goal</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> : <span class="id" title="keyword">Prop</span>, <span class="id" title="var">P</span> -&gt; <span class="id" title="var">P</span> \/ <span class="id" title="var">Q</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">p</span> : <span class="id" title="var">P</span> |- <span class="id" title="var">P</span> \/ <span class="id" title="var">Q</span> =&gt; <span class="id" title="tactic">left</span>; <span class="id" title="tactic">assumption</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
PowyÅ¼szy <span class="inlinecode"><span class="id" title="keyword">match</span></span> nie zawiera zmiennych unifikacyjnych i dziaÅ‚a w
    nastÄ™pujÄ…cy sposÃ³b:
<ul class="doclist">
<li> szukamy w kontekÅ›cie obiektu <span class="inlinecode"><span class="id" title="var">p</span></span>, ktÃ³rego typ pasuje do wzorca <span class="inlinecode"><span class="id" title="var">P</span></span>.
      Obiekt, ktÃ³ry nazywamy <span class="inlinecode"><span class="id" title="var">p</span></span> w rzeczywistoÅ›ci nie musi nazywaÄ‡ siÄ™ <span class="inlinecode"><span class="id" title="var">p</span></span>,
      ale jego typem rzeczywiÅ›cie musi byÄ‡ <span class="inlinecode"><span class="id" title="var">P</span></span>. W szczegÃ³lnoÅ›ci, wzorzec
      <span class="inlinecode"><span class="id" title="var">P</span></span> nie pasuje do <span class="inlinecode"><span class="id" title="var">Q</span></span>, gdyÅ¼ <span class="inlinecode"><span class="id" title="var">P</span></span> i <span class="inlinecode"><span class="id" title="var">Q</span></span> nie sÄ… konwertowalne.

</li>
<li> jednoczeÅ›nie Å¼Ä…damy, by cel byÅ‚ postaci <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">\/</span> <span class="inlinecode"><span class="id" title="var">Q</span></span>, gdzie zarÃ³wno <span class="inlinecode"><span class="id" title="var">P</span></span>
      jak i <span class="inlinecode"><span class="id" title="var">Q</span></span> odnoszÄ… siÄ™ do obiektÃ³w z kontekstu, ktÃ³re rzeczywiÅ›cie tak
      siÄ™ nazywajÄ….

</li>
<li> jeÅ¼eli powyÅ¼sze wzorce zostanÄ… dopasowane, to uÅ¼ywamy taktyki <span class="inlinecode"><span class="id" title="tactic">left</span>;</span>
      <span class="inlinecode"><span class="id" title="tactic">assumption</span></span>, ktÃ³ra rozwiÄ…zuje cel. 
</li>
</ul>

<div class="paragraph"> </div>

 Zobaczmy, co siÄ™ stanie, jeÅ¼eli w powyÅ¼szym przykÅ‚adzie zmienimy nazwy
    hipotez. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Goal</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Prop</span>, <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> \/ <span class="id" title="var">B</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Fail</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">p</span> : <span class="id" title="var">P</span> |- <span class="id" title="var">P</span> \/ <span class="id" title="var">Q</span> =&gt; <span class="id" title="tactic">left</span>; <span class="id" title="tactic">assumption</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">p</span> : <span class="id" title="var">A</span> |- <span class="id" title="var">A</span> \/ <span class="id" title="var">B</span> =&gt; <span class="id" title="tactic">left</span>; <span class="id" title="tactic">assumption</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Tutaj zamiast <span class="inlinecode"><span class="id" title="var">P</span></span> mamy <span class="inlinecode"><span class="id" title="var">A</span></span>, zaÅ› zamiast <span class="inlinecode"><span class="id" title="var">Q</span></span> jest <span class="inlinecode"><span class="id" title="var">B</span></span>. <span class="inlinecode"><span class="id" title="keyword">match</span></span> identyczny
    jak poprzednio tym razem zawodzi. Dzieje siÄ™ tak, gdyÅ¼ <span class="inlinecode"><span class="id" title="var">P</span></span> odnosi siÄ™
    tu do obiektu z kontekstu, ktÃ³ry nazywa siÄ™ <span class="inlinecode"><span class="id" title="var">P</span></span>. Niestety, w kontekÅ›cie
    nie ma obiektu o takiej nazwie, o czym Coq skrzÄ™tnie nas informuje.

<div class="paragraph"> </div>

    W <span class="inlinecode"><span class="id" title="keyword">match</span></span>u w celu oraz po prawej stronie od <span class="inlinecode">:</span> w hipotezie nie moÅ¼emy
    za pomocÄ… nazwy <span class="inlinecode"><span class="id" title="var">P</span></span> dopasowaÄ‡ obiektu, ktÃ³ry nazywa siÄ™ <span class="inlinecode"><span class="id" title="var">A</span></span>. DopasowaÄ‡
    <span class="inlinecode"><span class="id" title="var">A</span></span> moÅ¼emy jednak uÅ¼ywajÄ…c wzorca <span class="inlinecode"><span class="id" title="var">A</span></span>. Ale co, gdybyÅ›my nie wiedzieli,
    jak dokÅ‚adnie nazywa siÄ™ poszukiwany obiekt? 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Goal</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">A</span> <span class="id" title="var">B</span> : <span class="id" title="keyword">Prop</span>, <span class="id" title="var">A</span> -&gt; <span class="id" title="var">A</span> \/ <span class="id" title="var">B</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">p</span> : ?<span class="id" title="var">P</span> |- ?<span class="id" title="var">P</span> \/ ?<span class="id" title="var">Q</span> =&gt; <span class="id" title="tactic">idtac</span> <span class="id" title="var">P</span>; <span class="id" title="tactic">idtac</span> <span class="id" title="var">Q</span>; <span class="id" title="tactic">left</span>; <span class="id" title="tactic">assumption</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
JeÅ¼eli chcemy dopasowaÄ‡ term o nieznanej nam nazwie (lub term, ktÃ³rego
    podtermy majÄ… nieznane nazwy) musimy uÅ¼yÄ‡ zmiennych unifikacyjnych.
    Wizualnie moÅ¼na rozpoznaÄ‡ je po tym, Å¼e ich nazwy zaczynajÄ… siÄ™ od
    znaku <span class="inlinecode">?</span>. Zmienna unifkacyjna <span class="inlinecode">?<span class="id" title="var">x</span></span> pasuje do dowolnego termu, a
    udane dopasowanie sprawia, Å¼e po prawej stronie strzaÅ‚ki <span class="inlinecode">=&gt;</span> moÅ¼emy
    do dopasowanego termu odnosiÄ‡ siÄ™ za pomocÄ… nazwy <span class="inlinecode"><span class="id" title="var">x</span></span>.

<div class="paragraph"> </div>

    PowyÅ¼sze dopasowanie dziaÅ‚a w nastÄ™pujÄ…cy sposÃ³b:
<ul class="doclist">
<li> prÃ³bujemy dopasowaÄ‡ wzorzec <span class="inlinecode"><span class="id" title="var">p</span></span> <span class="inlinecode">:</span> <span class="inlinecode">?<span class="id" title="var">P</span></span> do najÅ›wieÅ¼szej hipotezy w
      kontekÅ›cie, czyli <span class="inlinecode"><span class="id" title="var">H</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">A</span></span>. <span class="inlinecode"><span class="id" title="var">p</span></span> jest nazwÄ… tymczasowÄ… i wobec tego
      pasuje do <span class="inlinecode"><span class="id" title="var">H</span></span>, zaÅ› zmienna unifikacyjna <span class="inlinecode">?<span class="id" title="var">P</span></span> pasuje do dowolnego
      termu, a zatem pasuje takÅ¼e do <span class="inlinecode"><span class="id" title="var">A</span></span>.

</li>
<li> dopasowanie hipotezy koÅ„czy siÄ™ sukcesem i wskutek tego zmienna
      unifikacyjna <span class="inlinecode">?<span class="id" title="var">P</span></span> zostaje zwiÄ…zana z termem <span class="inlinecode"><span class="id" title="var">A</span></span>. Od teraz w dalszych
      wzorcach bÄ™dzie ona pasowaÄ‡ jedynie do termu <span class="inlinecode"><span class="id" title="var">A</span></span>.

</li>
<li> nastÄ™puje prÃ³ba dopasowania celu do wzorca <span class="inlinecode">?<span class="id" title="var">P</span></span> <span class="inlinecode">\/</span> <span class="inlinecode">?<span class="id" title="var">Q</span></span>. PoniewaÅ¼
      <span class="inlinecode">?<span class="id" title="var">P</span></span> zostaÅ‚o zwiÄ…zane z <span class="inlinecode"><span class="id" title="var">A</span></span>, to wzorzec <span class="inlinecode">?<span class="id" title="var">P</span></span> <span class="inlinecode">\/</span> <span class="inlinecode">?<span class="id" title="var">Q</span></span> oznacza tak
      naprawdÄ™ <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">\/</span> <span class="inlinecode">?<span class="id" title="var">Q</span></span>. Zmienna unifikacyjna <span class="inlinecode">?<span class="id" title="var">Q</span></span> nie zostaÅ‚a wczeÅ›niej
      zwiÄ…zana i wobec tego pasuje do wszystkiego.

</li>
<li> wobec tego <span class="inlinecode">?<span class="id" title="var">Q</span></span> w szczegÃ³lnoÅ›ci pasuje do <span class="inlinecode"><span class="id" title="var">B</span></span>, a zatem wzorzec
      <span class="inlinecode">?<span class="id" title="var">P</span></span> <span class="inlinecode">\/</span> <span class="inlinecode">?<span class="id" title="var">Q</span></span> pasuje do <span class="inlinecode"><span class="id" title="var">A</span></span> <span class="inlinecode">\/</span> <span class="inlinecode"><span class="id" title="var">B</span></span> i caÅ‚e dopasowanie koÅ„czy siÄ™
      sukcesem. W jego wyniku <span class="inlinecode">?<span class="id" title="var">Q</span></span> zostaje zwiÄ…zane z <span class="inlinecode"><span class="id" title="var">B</span></span>.

</li>
<li> zostaje wykonana taktyka <span class="inlinecode"><span class="id" title="tactic">idtac</span></span> <span class="inlinecode"><span class="id" title="var">P</span>;</span> <span class="inlinecode"><span class="id" title="tactic">idtac</span></span> <span class="inlinecode"><span class="id" title="var">Q</span></span>, ktÃ³ra potwierdza, Å¼e
      zmienna unifikacyjna <span class="inlinecode">?<span class="id" title="var">P</span></span> zostaÅ‚a zwiÄ…zana z <span class="inlinecode"><span class="id" title="var">A</span></span>, a <span class="inlinecode">?<span class="id" title="var">Q</span></span> z <span class="inlinecode"><span class="id" title="var">B</span></span>,
      wobec czego na prawo od <span class="inlinecode">=&gt;</span> faktycznie moÅ¼emy do <span class="inlinecode"><span class="id" title="var">A</span></span> i <span class="inlinecode"><span class="id" title="var">B</span></span> odwoÅ‚ywaÄ‡
      siÄ™ odpowiednio jako <span class="inlinecode"><span class="id" title="var">P</span></span> i <span class="inlinecode"><span class="id" title="var">Q</span></span>.

</li>
<li> taktyka <span class="inlinecode"><span class="id" title="tactic">left</span>;</span> <span class="inlinecode"><span class="id" title="tactic">assumption</span></span> rozwiÄ…zuje cel. 
</li>
</ul>

<div class="paragraph"> </div>

 PodkreÅ›lmy raz jeszcze, Å¼e zmienne unifikacyjne mogÄ… wystÄ™paÄ‡ tylko we
    wzorcach, a wiÄ™c w hipotezach po prawej stronie dwukropka <span class="inlinecode">:</span> oraz w
    celu. BÅ‚Ä™dem byÅ‚oby napisanie w hipotezie <span class="inlinecode">?<span class="id" title="var">p</span></span> <span class="inlinecode">:</span> <span class="inlinecode">?<span class="id" title="var">P</span></span>. Podobnie bÅ‚Ä™dem
    byÅ‚oby uÅ¼ycie nazwy <span class="inlinecode">?<span class="id" title="var">P</span></span> na prawo od strzaÅ‚ki <span class="inlinecode">=&gt;</span>.

<div class="paragraph"> </div>

    ZauwaÅ¼my teÅ¼, Å¼e w danej gaÅ‚Ä™zi <span class="inlinecode"><span class="id" title="keyword">match</span></span>a kaÅ¼da zmienna unifikacyjna moÅ¼e
    wystÄ…piÄ‡ wiÄ™cej niÅ¼ jeden raz. Wzorce, w ktÃ³rych zmienne unifikacyjne
    wystÄ™pujÄ… wiÄ™cej niÅ¼ raz to wzorce nieliniowe. MoÅ¼emy skontrastowaÄ‡ je
    ze wzorcami liniowymi, w ktÃ³rych kaÅ¼da zmienna moÅ¼e wystÄ…piÄ‡ co najwyÅ¼ej
    raz.

<div class="paragraph"> </div>

    Wzorcami liniowymi sÄ… wzorce, ktÃ³rych uÅ¼ywamy podczas definiowania
    zwykÅ‚ych funkcji przez dopasowanie do wzorca (zauwaÅ¼my jednak, Å¼e
    tamtejsze zmienne unifikacyjne nie zaczynajÄ… siÄ™ od <span class="inlinecode">?</span>). Ograniczenie
    do wzorcÃ³w liniowych jest spowodowane faktem, Å¼e nie zawsze moÅ¼liwe
    jest stwierdzenie, czy dwa dowolne termy do siebie pasujÄ….

<div class="paragraph"> </div>

    JÄ™zyk termÃ³w Coqa w celu unikniÄ™cia sprzecznoÅ›ci musi byÄ‡ zupeÅ‚nie
    nieskazitelny i musi zakazywaÄ‡ uÅ¼ywania wzorcÃ³w nieliniowych. JÄ™zyk
    Ltac, ktÃ³ry nie moÅ¼e sam z siebie wyczarowaÄ‡ sprzecznoÅ›ci, moÅ¼e sobie
    pozwoliÄ‡ na wiÄ™cej i wobec tego wzorce nieliniowe sÄ… legalne. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Goal</span><br/>
&nbsp;&nbsp;[2] = [].<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- ?<span class="id" title="var">x</span> = <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id" title="var">cons</span> ?<span class="id" title="var">h</span> <span class="id" title="var">_</span> = <span class="id" title="var">nil</span> =&gt; <span class="id" title="tactic">idtac</span> <span class="id" title="var">h</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- 2 :: <span class="id" title="var">_</span> = ?<span class="id" title="var">l</span> =&gt; <span class="id" title="tactic">idtac</span> <span class="id" title="var">l</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- [?<span class="id" title="var">x</span>] = [] =&gt; <span class="id" title="tactic">idtac</span> <span class="id" title="var">x</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
ZauwaÅ¼my, Å¼e nie musimy uÅ¼ywaÄ‡ zmiennych unifikacyjnych do dopasowywania
    caÅ‚ych termÃ³w â€” w pierwszym z powyÅ¼szych przykÅ‚adÃ³w uÅ¼ywamy zmiennej <span class="inlinecode">?<span class="id" title="var">x</span></span>,
    aby dopasowaÄ‡ jedynie lewÄ… stronÄ™ rÃ³wnania, ktÃ³re jest celem.

<div class="paragraph"> </div>

    Ze zmiennych unifikacyjnych oraz staÅ‚ych, zmiennych i funkcji (a wiÄ™c
    takÅ¼e konstruktorÃ³w) moÅ¼emy budowaÄ‡ wzorce dopasowujÄ…ce termy o rÃ³Å¼nych
    fikuÅ›nych ksztaÅ‚tach.

<div class="paragraph"> </div>

    W drugim przykÅ‚adzie wzorzec <span class="inlinecode"><span class="id" title="var">cons</span></span> <span class="inlinecode">?<span class="id" title="var">h</span></span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">nil</span></span> dopasowuje rÃ³wnanie,
    ktÃ³rego lewa strona jest listÄ… niepustÄ… o dowolnej gÅ‚owie, do ktÃ³rej
    moÅ¼emy siÄ™ odnosiÄ‡ jako <span class="inlinecode"><span class="id" title="var">h</span></span>, oraz dowolnym ogonie, do ktÃ³rego nie
    chcemy mÃ³c siÄ™ odnosiÄ‡. Prawa strona tego rÃ³wnania jest listÄ… pustÄ….

<div class="paragraph"> </div>

    Wzorce radzÄ… sobie bez problemu takÅ¼e z notacjami. Wzorzec <span class="inlinecode">2</span> <span class="inlinecode">::</span> <span class="inlinecode"><span class="id" title="var">_</span></span> <span class="inlinecode">=</span> <span class="inlinecode">?<span class="id" title="var">l</span></span>
    dopasowuje rÃ³wnanie, ktÃ³rego lewa strona jest listÄ…, ktÃ³rej gÅ‚owa to <span class="inlinecode">2</span>,
    zaÅ› ogon jest dowolny, a prawa strona jest dowolnÄ… listÄ…, do ktÃ³rej
    bÄ™dziemy siÄ™ mogli odwoÅ‚ywaÄ‡ po prawej stronie <span class="inlinecode">=&gt;</span> jako <span class="inlinecode"><span class="id" title="var">l</span></span>.

<div class="paragraph"> </div>

    Ostatni wzorzec pasuje do rÃ³wnania, ktÃ³rego lewa strona jest singletonem
    (listÄ… jednoelementowÄ…) zawierajÄ…cym wartoÅ›Ä‡, do ktÃ³rej bÄ™dziemy mogli
    odnosiÄ‡ siÄ™ za pomocÄ… nazwy <span class="inlinecode"><span class="id" title="var">x</span></span>, zaÅ› prawÄ… stronÄ… jest lista pusta. 
<div class="paragraph"> </div>

<a name="lab464"></a><h4 class="section">Ä†wiczenie (my_assumption)</h4>

<div class="paragraph"> </div>

 Napisz taktykÄ™ <span class="inlinecode"><span class="id" title="var">my_assumption</span></span>, ktÃ³ra dziaÅ‚a tak samo, jak <span class="inlinecode"><span class="id" title="tactic">assumption</span></span>.
    Nie uÅ¼ywaj <span class="inlinecode"><span class="id" title="tactic">assumption</span></span> â€” uÅ¼yj <span class="inlinecode"><span class="id" title="keyword">match</span></span>a. 
</div>
<div class="code">

<br/>

<br/>
<span class="id" title="keyword">Goal</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span> : <span class="id" title="keyword">Prop</span>, <span class="id" title="var">P</span> -&gt; <span class="id" title="var">P</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span>. <span class="id" title="var">my_assumption</span>.<br/>
<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab465"></a><h4 class="section">Ä†wiczenie (forward)</h4>

<div class="paragraph"> </div>

 Napisz taktykÄ™ <span class="inlinecode"><span class="id" title="var">forward</span></span>, ktÃ³ra wyspecjalizuje wszystkie znalezione w
    kontekÅ›cie implikacje, o ile oczywiÅ›cie ich przesÅ‚anki rÃ³wnieÅ¼ bÄ™dÄ…
    znajdowaÅ‚y siÄ™ w kontekÅ›cie, a nastÄ™pnie rozwiÄ…Å¼e cel, jeÅ¼eli jest on
    prawdziwy na mocy zaÅ‚oÅ¼enia.

<div class="paragraph"> </div>

    Dla przykÅ‚adu, kontekst <span class="inlinecode"><span class="id" title="var">H</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">Q</span>,</span> <span class="inlinecode"><span class="id" title="var">H0</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">Q</span></span> <span class="inlinecode">-&gt;</span> <span class="inlinecode"><span class="id" title="var">R</span>,</span> <span class="inlinecode"><span class="id" title="var">H1</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">|-</span> <span class="inlinecode"><span class="id" title="var">_</span></span>
    powinien zostaÄ‡ przeksztaÅ‚cony w <span class="inlinecode"><span class="id" title="var">H</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">Q</span>,</span> <span class="inlinecode"><span class="id" title="var">H0</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">R</span>,</span> <span class="inlinecode"><span class="id" title="var">H1</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">P</span></span> <span class="inlinecode">|-</span> <span class="inlinecode"><span class="id" title="var">_</span></span>.

<div class="paragraph"> </div>

    WskazÃ³wka: przydatna bÄ™dzie taktyka <span class="inlinecode"><span class="id" title="tactic">specialize</span></span>. 
</div>
<div class="code">

<br/>

<br/>
<span class="id" title="keyword">Example</span> <span class="id" title="var">forward_1</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">R</span> : <span class="id" title="keyword">Prop</span>, (<span class="id" title="var">P</span> -&gt; <span class="id" title="var">Q</span>) -&gt; (<span class="id" title="var">Q</span> -&gt; <span class="id" title="var">R</span>) -&gt; <span class="id" title="var">P</span> -&gt; <span class="id" title="var">R</span>.<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">forward</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">Example</span> <span class="id" title="var">forward_2</span> :<br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">P</span> <span class="id" title="var">Q</span> <span class="id" title="var">R</span> <span class="id" title="var">S</span> : <span class="id" title="keyword">Prop</span>, (<span class="id" title="var">P</span> -&gt; <span class="id" title="var">Q</span> -&gt; <span class="id" title="var">R</span>) -&gt; (<span class="id" title="var">S</span> -&gt; <span class="id" title="var">Q</span> -&gt; <span class="id" title="var">P</span> -&gt; <span class="id" title="var">R</span>).<br/>
<span class="id" title="keyword">Proof</span>. <span class="id" title="var">forward</span>. <span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab466"></a><h1 class="section">NarzÄ™dzia przydatne przy dopasowywaniu</h1>

<div class="paragraph"> </div>

 Poznawszy juÅ¼ konstrukt <span class="inlinecode"><span class="id" title="keyword">match</span></span> i jego warianty oraz sposÃ³b dopasowywania
    wzorcÃ³w i rolÄ™ unifikacji oraz zmiennych unifikacyjnych w tym procesie,
    czas rzuciÄ‡ okiem na kilka niezwykle przydatnych narzÄ™dzi, ktÃ³re uczyniÄ…
    nasze Å¼ycie dopasowywacza Å‚atwiejszym. 
<div class="paragraph"> </div>

<a name="lab467"></a><h2 class="section">Dopasowanie podtermu</h2>

<div class="paragraph"> </div>

 Pierwszym z nich jest wyraÅ¼enie <span class="inlinecode"><span class="id" title="keyword">context</span></span> <span class="inlinecode"><span class="id" title="var">ident</span></span> <span class="inlinecode">[<span class="id" title="var">term</span>]</span>, dziÄ™ki ktÃ³remu
    moÅ¼emy tworzyÄ‡ wzorce dopasowujÄ…ce podtermy danego termu. Zobaczmy jego
    dziaÅ‚anie na przykÅ‚adzie. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Goal</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">forall</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">a</span> = <span class="id" title="var">b</span> -&gt; <span class="id" title="var">b</span> = <span class="id" title="var">c</span> -&gt; <span class="id" title="var">a</span> = <span class="id" title="var">c</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">a</span> <span class="id" title="var">b</span> <span class="id" title="var">c</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> <span class="id" title="var">G</span> [?<span class="id" title="var">x</span> = ?<span class="id" title="var">y</span>] =&gt; <span class="id" title="tactic">idtac</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="var">multimatch</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| |- <span class="id" title="keyword">context</span> <span class="id" title="var">G</span> [?<span class="id" title="var">x</span> = ?<span class="id" title="var">y</span>] =&gt; <span class="id" title="tactic">idtac</span> <span class="id" title="var">G</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
W powyÅ¼szym przykÅ‚adzie naszym celem jest znalezienie wszystkich rÃ³wnaÅ„,
    ktÃ³re sÄ… podtermami naszego celu. Dopasowanie wzorca <span class="inlinecode"><span class="id" title="keyword">context</span></span> <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode">[?<span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode">?<span class="id" title="var">y</span>]</span>
    przebiega w nastÄ™pujÄ…cy sposÃ³b:
<ul class="doclist">
<li> w celu wyszukiwae sÄ… wszystkie podtermy postaci <span class="inlinecode">?<span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode">?<span class="id" title="var">y</span></span>. SÄ… trzy
      takie: <span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">b</span></span>, <span class="inlinecode"><span class="id" title="var">b</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">c</span></span> oraz <span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">c</span></span>

</li>
<li> wzorzec <span class="inlinecode">?<span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode">?<span class="id" title="var">y</span></span> zostaje zunifikowany z pierwszym pasujÄ…cym podtermem,
      czyli <span class="inlinecode"><span class="id" title="var">a</span></span> <span class="inlinecode">=</span> <span class="inlinecode"><span class="id" title="var">b</span></span>. W wyniku dopasowania zmienna unifikacyjna <span class="inlinecode">?<span class="id" title="var">x</span></span> zostaje
      zwiÄ…zana z <span class="inlinecode"><span class="id" title="var">a</span></span>, zaÅ› <span class="inlinecode">?<span class="id" title="var">y</span></span> z <span class="inlinecode"><span class="id" title="var">b</span></span>

</li>
<li> caÅ‚y term, ktÃ³rego podterm zostaÅ‚ dopasowany do wzorca, zostaje
      zwiÄ…zany ze zmiennÄ… <span class="inlinecode"><span class="id" title="var">G</span></span>, przy czym jego dopasowany podterm zostaje
      specjalnie zaznaczony (po wypisaniu w jego miejscu widaÄ‡ napis "?M-1")

</li>
<li> zostaje wykonana taktyka <span class="inlinecode"><span class="id" title="tactic">idtac</span></span> <span class="inlinecode"><span class="id" title="var">G</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="var">y</span></span> 
</li>
</ul>

<div class="paragraph"> </div>

 Druga z powyÅ¼szych taktyk dziaÅ‚a podobnie, ale dziÄ™ki zastosowaniu
    <span class="inlinecode"><span class="id" title="tactic">repeat</span></span> <span class="inlinecode"><span class="id" title="var">multimatch</span></span> ujawnia nam ona wszystkie podtermy pasujÄ…ce do wzorca
    <span class="inlinecode">?<span class="id" title="var">x</span></span> <span class="inlinecode">=</span> <span class="inlinecode">?<span class="id" title="var">y</span></span>. 
<div class="paragraph"> </div>

<a name="lab468"></a><h4 class="section">Ä†wiczenie (podtermy)</h4>

<div class="paragraph"> </div>

 Oblicz ile podtermÃ³w ma term <span class="inlinecode">42</span>. NastÄ™pnie napisz taktykÄ™ <span class="inlinecode"><span class="id" title="var">nat_subterm</span></span>,
    ktÃ³ra potrafi wypisaÄ‡ wszystkie podtermy dowolnej liczby naturalnej, ktÃ³ra
    znajduje siÄ™ w celu. WymyÅ›l odpowiedni cel i przetestuj na nim swoje
    obliczenia. 
</div>
<div class="code">

<br/>

<br/>
</div>

<div class="doc">
<a name="lab469"></a><h2 class="section">Generowanie nieuÅ¼ywanych nazw</h2>

<div class="paragraph"> </div>

 Drugim przydatnym narzÄ™dziem jest konstrukt <span class="inlinecode"><span class="id" title="tactic">fresh</span></span>, ktÃ³ry pozwala nam
    wygenerowaÄ‡ nazwÄ™, ktÃ³rej nie nosi jeszcze Å¼adna zmienna. DziÄ™ki temu
    moÅ¼emy uniknÄ…Ä‡ konfliktÃ³w nazw, gdy uÅ¼ywamy taktyk takich jak <span class="inlinecode"><span class="id" title="tactic">intros</span></span>
    czy <span class="inlinecode"><span class="id" title="tactic">destruct</span></span>, ktÃ³re pozwalajÄ… nam nazywaÄ‡ obiekty. Przyjrzyjmy siÄ™
    nastÄ™pujÄ…cemu przykÅ‚adowi. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Goal</span> <span class="id" title="keyword">forall</span> <span class="id" title="var">x</span> <span class="id" title="var">y</span> : <span class="id" title="var">nat</span>, {<span class="id" title="var">x</span> = <span class="id" title="var">y</span>} + {<span class="id" title="var">x</span> &lt;&gt; <span class="id" title="var">y</span>}.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>. <span class="id" title="var">Fail</span> <span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">x</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="tactic">in</span> <span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>.<br/>
<span class="id" title="keyword">Restart</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>. <span class="id" title="keyword">let</span> <span class="id" title="var">x</span> := <span class="id" title="tactic">fresh</span> "y" <span class="id" title="tactic">in</span> <span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>.<br/>
<span class="id" title="keyword">Restart</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>. <span class="id" title="keyword">let</span> <span class="id" title="var">x</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="var">x</span> <span class="id" title="tactic">in</span> <span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>.<br/>
<span class="id" title="keyword">Restart</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>. <span class="id" title="keyword">let</span> <span class="id" title="var">x</span> := <span class="id" title="tactic">fresh</span> <span class="id" title="var">y</span> <span class="id" title="tactic">in</span> <span class="id" title="tactic">intro</span> <span class="id" title="var">x</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
Mamy w kontekÅ›cie liczbÄ™ naturalnÄ… <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:</span> <span class="inlinecode"><span class="id" title="var">nat</span></span> i chcielibyÅ›my wprowadziÄ‡
    do niego kolejnÄ…. CÃ³Å¼, nie jest to Å¼aden problem â€” wystarczy nazwaÄ‡ go
    dowolnÄ… nazwÄ… rÃ³Å¼nÄ… od "x". Ale co, jeÅ¼eli nie wiemy, jak nazywajÄ… siÄ™
    obiekty znajdujÄ…ce siÄ™ w kontekÅ›cie?

<div class="paragraph"> </div>

    Przy intensywnym posÅ‚ugiwaniu siÄ™ taktykami i automatyzacjÄ… jest to nader
    czÄ™sta moÅ¼liwoÅ›Ä‡: gdy dopasujemy kontekst za pomocÄ… <span class="inlinecode"><span class="id" title="keyword">match</span></span>a, nie znamy
    oryginalnych nazw dopasowanych termÃ³w â€” moÅ¼emy odwoÅ‚ywaÄ‡ siÄ™ do nich
    tylko za pomocÄ… nazw lokalnych, wprowadzonych na potrzeby danego wzorca.

<div class="paragraph"> </div>

    Z odsiÄ™czÄ… przychodzi nam generator Å›wieÅ¼ych nazw o wdziÄ™cznej nazwie
    <span class="inlinecode"><span class="id" title="tactic">fresh</span></span>. Zazwyczaj bÄ™dziemy siÄ™ nim posÅ‚ugiwaÄ‡ w nastÄ™pujÄ…cy sposÃ³b:
    <span class="inlinecode"><span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="var">var</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="tactic">fresh</span></span> <span class="inlinecode"><span class="id" title="var">arg_1</span></span> <span class="inlinecode">...</span> <span class="inlinecode"><span class="id" title="var">arg_N</span></span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="var">t</span></span>. Tutaj <span class="inlinecode"><span class="id" title="var">var</span></span> jest zmiennÄ…
    jÄ™zyka <span class="inlinecode"><span class="id" title="keyword">Ltac</span></span>, ktÃ³rej wartoÅ›ciÄ… jest Å›wieÅ¼o wygenerowana nazwa, a <span class="inlinecode"><span class="id" title="var">t</span></span>
    to jakaÅ› taktyka, ktÃ³ra w dowolny sposÃ³b korzysta z <span class="inlinecode"><span class="id" title="var">var</span></span>.

<div class="paragraph"> </div>

    PowyÅ¼sze cztery taktyki dziaÅ‚ajÄ… tak:
<ul class="doclist">
<li> <span class="inlinecode"><span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="tactic">fresh</span></span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="tactic">intro</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> â€” <span class="inlinecode"><span class="id" title="tactic">fresh</span></span> generuje Å›wieÅ¼Ä… nazwÄ™, domyÅ›lnie
      jest niÄ… "H". Nazwa ta staje siÄ™ wartoÅ›ciÄ… Ltacowej zmiennej <span class="inlinecode"><span class="id" title="var">x</span></span>. Owa
      zmienna jest argumentem taktyki <span class="inlinecode"><span class="id" title="tactic">intro</span></span>, dziÄ™ki czemu wprowadzony do
      kontekstu obiekt typu <span class="inlinecode"><span class="id" title="var">nat</span></span> zostaje nazwany "H".

</li>
<li> <span class="inlinecode"><span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="tactic">fresh</span></span> <span class="inlinecode">&quot;<span class="id" title="var">y</span>&quot;</span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="tactic">intro</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> â€” jeÅ¼eli <span class="inlinecode"><span class="id" title="tactic">fresh</span></span> dostanie jako argument
      ciÄ…g znakÃ³w, to wygeneruje nazwÄ™ zaczynajÄ…cÄ… siÄ™ od tego ciÄ…gu, ktÃ³ra
      nie jest jeszcze zajÄ™ta. PoniewaÅ¼ nazwa "y" jest wolna, wÅ‚aÅ›nie tak
      zostaje nazwany wprowadzany obiekt.

</li>
<li> <span class="inlinecode"><span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="tactic">fresh</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="tactic">intro</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> â€” tutaj mamy maÅ‚y zamÄ™t. Pierwszy i trzeci
      <span class="inlinecode"><span class="id" title="var">x</span></span> jest zmiennÄ… Ltaca, zaÅ› drugi odnosi siÄ™ do obiektu z kontekstu.
      JeÅ¼eli <span class="inlinecode"><span class="id" title="var">arg</span></span> jest obiektem z kontekstu, to <span class="inlinecode"><span class="id" title="tactic">fresh</span></span> <span class="inlinecode"><span class="id" title="var">arg</span></span> tworzy Å›wieÅ¼Ä…
      nazwÄ™ zaczynajÄ…cÄ… siÄ™ od nazwy, jakÄ… <span class="inlinecode"><span class="id" title="var">arg</span></span> nosi w kontekÅ›cie. Tutaj
      nie  ma to znaczenia, gdyÅ¼ <span class="inlinecode"><span class="id" title="var">x</span></span> nazywa siÄ™ po prostu "x" i wobec tego
      <span class="inlinecode"><span class="id" title="tactic">fresh</span></span> generuje nazwÄ™ "x0", ale mechanizm ten dziaÅ‚a tak samo w
      przypadku zmiennych unifikacyjnych.

</li>
<li> <span class="inlinecode"><span class="id" title="keyword">let</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> <span class="inlinecode">:=</span> <span class="inlinecode"><span class="id" title="tactic">fresh</span></span> <span class="inlinecode"><span class="id" title="var">y</span></span> <span class="inlinecode"><span class="id" title="tactic">in</span></span> <span class="inlinecode"><span class="id" title="tactic">intro</span></span> <span class="inlinecode"><span class="id" title="var">x</span></span> â€” jak widaÄ‡, argumentem <span class="inlinecode"><span class="id" title="tactic">fresh</span></span> moÅ¼e teÅ¼
      byÄ‡ nazwa zmiennej nie odnoszÄ…ca siÄ™ zupeÅ‚nie do niczego. W naszym
      przypadku nie ma w kontekÅ›cie zmiennej <span class="inlinecode"><span class="id" title="var">y</span></span>, a <span class="inlinecode"><span class="id" title="tactic">fresh</span></span> generuje na jej
      podstawie Å›wieÅ¼Ä… nazwÄ™ "y". 
</li>
</ul>

<div class="paragraph"> </div>

<a name="lab470"></a><h2 class="section"><span class="inlinecode"><span class="id" title="tactic">fail</span></span> (znowu)</h2>

<div class="paragraph"> </div>

 TaktykÄ™ <span class="inlinecode"><span class="id" title="tactic">fail</span></span> juÅ¼ poznaliÅ›my, ale nie w jej peÅ‚nej krasie. Czas wiÄ™c
    odkryÄ‡ resztÄ™ jej moÅ¼liwoÅ›ci. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Goal</span> <span class="id" title="var">False</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Fail</span> <span class="id" title="tactic">fail</span> "Hoho, czego siÄ™ spodziewaÅ‚eÅ›?" 1.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
Pierwsza z nich nie jest zbyt spektakularna â€” moÅ¼emy do <span class="inlinecode"><span class="id" title="tactic">fail</span></span> przekazaÄ‡
    jako argumenty ciÄ…gi znakÃ³w lub termy, co spowoduje wyÅ›wietlenie ich w
    oknie wiadomoÅ›ci.

<div class="paragraph"> </div>

    DrugÄ…, znacznie waÅ¼niejszÄ… moÅ¼liwoÅ›ciÄ…, jakÄ… daje nam taktyka <span class="inlinecode"><span class="id" title="tactic">fail</span></span>,
    jest kontrola "poziomu poraÅ¼ki". DziÄ™ki niemu zyskujemy wÅ‚adzÄ™ nad
    tym, jak "mocno" taktyka <span class="inlinecode"><span class="id" title="tactic">fail</span></span> zawodzi. DomyÅ›nie wynosi on 0. UÅ¼ycie
    taktyki <span class="inlinecode"><span class="id" title="tactic">fail</span></span> (ktÃ³ra wobec tego oznacza to samo, co <span class="inlinecode"><span class="id" title="tactic">fail</span></span> <span class="inlinecode">0</span>) powouje
    przerwanie wykonywania obecnej gaÅ‚Ä™zi <span class="inlinecode"><span class="id" title="keyword">match</span></span>a i przejÅ›cie do nastÄ™pnej.
    UÅ¼ycie taktyki <span class="inlinecode"><span class="id" title="tactic">fail</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span>, gdzie n nie jest rÃ³wne 0, powoduje opuszczenie
    caÅ‚ego obecnego <span class="inlinecode"><span class="id" title="keyword">match</span></span>a (tj. wszystkich gaÅ‚Ä™zi) lub bloku <span class="inlinecode"><span class="id" title="tactic">do</span></span>/<span class="inlinecode"><span class="id" title="tactic">repeat</span></span>
    i wywoÅ‚anie <span class="inlinecode"><span class="id" title="tactic">fail</span></span> <span class="inlinecode">(<span class="id" title="var">n</span></span> <span class="inlinecode">-</span> <span class="inlinecode">1)</span>.

<div class="paragraph"> </div>

    Przyjrzyjmy siÄ™ temu zachowaniu na przykÅ‚adzie. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Goal</span> <span class="id" title="var">False</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span> "first branch"; <span class="id" title="tactic">fail</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span> "second branch"<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Fail</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span> "first branch"; <span class="id" title="tactic">fail</span> 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span> "second branch"<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span> "first branch"; <span class="id" title="tactic">fail</span> 1<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span> "second branch"<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">Fail</span> <span class="id" title="tactic">try</span> <span class="id" title="keyword">match</span> <span class="id" title="keyword">goal</span> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span> "first branch"; <span class="id" title="tactic">fail</span> 2<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">_</span> =&gt; <span class="id" title="tactic">idtac</span> "second branch"<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
Cztery powyÅ¼sze dopasowania dziaÅ‚ajÄ… nastÄ™pujÄ…co:
<ul class="doclist">
<li> W pierwszym dopasowana jest pierwsza gaÅ‚Ä…Åº. WyÅ›wietlona zostaje
      wiadomoÅ›Ä‡, po czym taktyka <span class="inlinecode"><span class="id" title="tactic">fail</span></span> zawodzi i nastÄ™puje przejÅ›cie
      do kolejnej gaÅ‚Ä™zi. Tutaj teÅ¼ wypisana zostaje wiadomoÅ›Ä‡ i caÅ‚a
      taktyka <span class="inlinecode"><span class="id" title="keyword">match</span></span> <span class="inlinecode">...</span> koÅ„czy siÄ™ sukcesem.

</li>
<li> W drugim przypadku dopasowana jest pierwsza gaÅ‚Ä…Åº, ktÃ³ra wypisuje
      wiadomoÅ›Ä‡, ale taktyka <span class="inlinecode"><span class="id" title="tactic">fail</span></span> <span class="inlinecode">1</span> powoduje, Å¼e caÅ‚y <span class="inlinecode"><span class="id" title="keyword">match</span></span> zawodzi
      i druga gaÅ‚Ä…Åº nie jest w ogÃ³le dopasowywana.

</li>
<li> Trzeci przypadek jest podobny do drugiego. <span class="inlinecode"><span class="id" title="tactic">fail</span></span> <span class="inlinecode">1</span> powoduje, Å¼e
      caÅ‚y <span class="inlinecode"><span class="id" title="keyword">match</span></span> zawodzi, ale dziÄ™ki kombinatorowi <span class="inlinecode"><span class="id" title="tactic">try</span></span> caÅ‚a taktyka
      <span class="inlinecode"><span class="id" title="tactic">try</span></span> <span class="inlinecode"><span class="id" title="keyword">match</span></span> <span class="inlinecode">...</span> koÅ„czy siÄ™ sukcesem.

</li>
<li> Czwarta taktyka jest podobna do trzeciej, ale tym razem po udanym
      dopasowaniu pierwszej gaÅ‚Ä™zi taktyka <span class="inlinecode"><span class="id" title="tactic">fail</span></span> <span class="inlinecode">2</span> powoduje, Å¼e caÅ‚y
      <span class="inlinecode"><span class="id" title="keyword">match</span></span> zawodzi. NastÄ™pnie ma miejsce wywoÅ‚anie taktyki <span class="inlinecode"><span class="id" title="tactic">fail</span></span> <span class="inlinecode">1</span>,
      ktÃ³re powoduje, Å¼e nawet mimo uÅ¼ycia kombinatora <span class="inlinecode"><span class="id" title="tactic">try</span></span> caÅ‚a taktyka
      <span class="inlinecode"><span class="id" title="tactic">try</span></span> <span class="inlinecode"><span class="id" title="keyword">match</span></span> <span class="inlinecode">...</span> zawodzi. 
</li>
</ul>

<div class="paragraph"> </div>

<a name="lab471"></a><h1 class="section">Inne (maÅ‚o) wesoÅ‚e rzeczy</h1>

<div class="paragraph"> </div>

 Ten podrozdziaÅ‚ bÄ™dzie wesoÅ‚Ä… zbieraninkÄ… rÃ³Å¼nych niezbyt przydatnych
    (przynajmniej dla mnie) konstruktÃ³w jÄ™zyka Ltac, ktÃ³re nie zostaÅ‚y
    dotychczas omÃ³wione. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Goal</span> <span class="id" title="var">False</span> /\ <span class="id" title="var">False</span> /\ <span class="id" title="var">False</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">let</span> <span class="id" title="var">n</span> := <span class="id" title="var">numgoals</span> <span class="id" title="tactic">in</span> <span class="id" title="tactic">idtac</span> <span class="id" title="var">n</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="keyword">let</span> <span class="id" title="var">n</span> := <span class="id" title="var">numgoals</span> <span class="id" title="tactic">in</span> <span class="id" title="tactic">idtac</span> <span class="id" title="var">n</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
IloÅ›Ä‡ celÃ³w moÅ¼emy policzyÄ‡ za pomocÄ… taktyki <span class="inlinecode"><span class="id" title="var">numgoals</span></span>. Liczy ona
    wszystkie cele, na ktÃ³re dziaÅ‚a, wiÄ™c jeÅ¼eli nie uÅ¼yjemy Å¼adnego
    selektora, zwrÃ³ci ona 1. Nie jest ona zbyt uÅ¼yteczna (poza bardzo
    skomplikowanymi taktykami, ktÃ³re z jakichÅ› powodÃ³w nie operujÄ… tylko na
    jednym celu, lecz na wszystkich). 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Goal</span> <span class="id" title="var">False</span> /\ <span class="id" title="var">False</span> /\ <span class="id" title="var">False</span>.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">repeat</span> <span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">all</span>: <span class="id" title="keyword">let</span> <span class="id" title="var">n</span> := <span class="id" title="var">numgoals</span> <span class="id" title="tactic">in</span> <span class="id" title="var">guard</span> <span class="id" title="var">n</span> &gt; 2.<br/>
&nbsp;&nbsp;<span class="id" title="var">Fail</span> <span class="id" title="var">all</span>: <span class="id" title="keyword">let</span> <span class="id" title="var">n</span> := <span class="id" title="var">numgoals</span> <span class="id" title="tactic">in</span> <span class="id" title="var">guard</span> <span class="id" title="var">n</span> &lt; 2.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
Taktyka <span class="inlinecode"><span class="id" title="var">guard</span></span> <span class="inlinecode"><span class="id" title="var">cond</span></span> pozwala nam dokonywaÄ‡ prostych testÃ³w na liczbach
    caÅ‚kowitych Ltaca. JeÅ¼eli warunek zachodzi, taktyka ta zachowuje siÄ™
    jak <span class="inlinecode"><span class="id" title="tactic">idtac</span></span>, czyli koÅ„czy siÄ™ sukcesem i nie robi nic wiÄ™cej. JeÅ¼eli
    warunek nie zachodzi, taktyka zawodzi.

<div class="paragraph"> </div>

    W powyÅ¼szym przykÅ‚adzie taktyka <span class="inlinecode"><span class="id" title="var">guard</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">&gt;</span> <span class="inlinecode">2</span> koÅ„czy siÄ™ sukcesem,
    gdyÅ¼ sÄ… 3 cele, a 3 &gt; 2, zaÅ› taktyka <span class="inlinecode"><span class="id" title="var">guard</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode">&lt;</span> <span class="inlinecode">2</span> zawodzi, bo sÄ…
    3 cele, a nie jest prawdÄ…, Å¼e 3 &lt; 2. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Inductive</span> <span class="id" title="var">even</span> : <span class="id" title="var">nat</span> -&gt; <span class="id" title="keyword">Prop</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">even0</span> : <span class="id" title="var">even</span> 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">evenSS</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n</span> : <span class="id" title="var">nat</span>, <span class="id" title="var">even</span> <span class="id" title="var">n</span> -&gt; <span class="id" title="var">even</span> (<span class="id" title="var">S</span> (<span class="id" title="var">S</span> <span class="id" title="var">n</span>)).<br/>

<br/>
<span class="id" title="keyword">Goal</span> <span class="id" title="var">even</span> 42.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">timeout</span> 1 <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
<span class="id" title="keyword">Goal</span> <span class="id" title="var">even</span> 1338.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="tactic">try</span> <span class="id" title="var">timeout</span> 1 <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
Kombinator <span class="inlinecode"><span class="id" title="var">timeout</span></span> <span class="inlinecode"><span class="id" title="var">n</span></span> <span class="inlinecode"><span class="id" title="var">t</span></span> pozwala nam sprawiÄ‡, Å¼eby taktyka t zawiodÅ‚a,
    jeÅ¼eli jej wykonanie bÄ™dzie zajmowaÅ‚o dÅ‚uÅ¼ej, niÅ¼ n sekund. Nie jest on
    zbyt przydatny, gdyÅ¼ szybkoÅ›Ä‡ wykonania danej taktyki jest kwestiÄ… mocno
    zaleÅ¼nÄ… on sprzÄ™tu. Jak moÅ¼na przeczytaÄ‡ w manualu, kombinator ten bywa
    przydatny gÅ‚Ã³wnie przy debugowaniu i nie zaleca siÄ™, Å¼eby wystÄ™powaÅ‚ w
    finalnych dowodach, gdyÅ¼ moÅ¼e powodowaÄ‡ problemy z przenoÅ›noÅ›ciÄ….

<div class="paragraph"> </div>

    W powyÅ¼szym przykÅ‚adzie taktyka <span class="inlinecode"><span class="id" title="var">timeout</span></span> <span class="inlinecode">1</span> <span class="inlinecode"><span class="id" title="tactic">repeat</span></span> <span class="inlinecode"><span class="id" title="tactic">constructor</span></span> koÅ„czy siÄ™
    sukcesem, gdyÅ¼ udowodnienie <span class="inlinecode"><span class="id" title="var">even</span></span> <span class="inlinecode">42</span> zajmuje jej mniej, niÅ¼ 1 sekundÄ™
    (przynajmniej na moim komputerze; na twoim taktyka ta moÅ¼e zawieÅ›Ä‡), ale
    juÅ¼ udowodnienie <span class="inlinecode"><span class="id" title="var">even</span></span> <span class="inlinecode">1338</span> trwa wiÄ™cej niÅ¼ jednÄ… sekundÄ™ i wobec tego
    taktyka <span class="inlinecode"><span class="id" title="var">timeout</span></span> <span class="inlinecode">1</span> <span class="inlinecode"><span class="id" title="tactic">repeat</span></span> <span class="inlinecode"><span class="id" title="tactic">constructor</span></span> dla tego celu zawodzi (przynajmniej
    u mnie; jeÅ¼eli masz mocny komputer, u ciebie moÅ¼e zadziaÅ‚aÄ‡).

<div class="paragraph"> </div>

    Co wiÄ™cej, kombinator <span class="inlinecode"><span class="id" title="var">timeout</span></span> moÅ¼e zachowywaÄ‡ siÄ™ rÃ³Å¼nie dla tego samego
    celu nawet na tym samym komputerze. Na przykÅ‚ad przed chwilÄ… taktyka ta
    zakoÅ„czyÅ‚Ä… siÄ™ na moim komputerze sukcesem, mimo Å¼e dotychczas zawsze
    zawodziÅ‚a). 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Goal</span> <span class="id" title="var">even</span> 666.<br/>
<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;<span class="id" title="var">time</span> <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>.<br/>
<span class="id" title="keyword">Restart</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Time</span> <span class="id" title="tactic">repeat</span> <span class="id" title="tactic">constructor</span>.<br/>
<span class="id" title="keyword">Abort</span>.<br/>

<br/>
</div>

<div class="doc">
Kolejnym kombinatorem jest <span class="inlinecode"><span class="id" title="var">time</span></span> <span class="inlinecode"><span class="id" title="var">t</span></span>, ktÃ³ry odpala taktykÄ™ <span class="inlinecode"><span class="id" title="var">t</span></span>, a nastÄ™pnie
    wyÅ›wietla informacjÄ™ o czasie, jaki zajÄ™Å‚o jej wykonanie. Czas ten jest
    czasem rzeczywistym, tzn. zaleÅ¼y od mocy twojego komputera. Nie jest zbyt
    staÅ‚y â€” zazwyczaj rÃ³Å¼ni siÄ™ od jednego mierzenia do drugiego, czasem
    nawet doÅ›Ä‡ znacznie.

<div class="paragraph"> </div>

    AlternatywÄ… dla taktyki <span class="inlinecode"><span class="id" title="var">time</span></span> jest komenda <span class="inlinecode"><span class="id" title="keyword">Time</span></span>, ktÃ³ra robi dokÅ‚adnie
    to samo. JeÅ¼eli stoisz przed wyborem miÄ™dzy tymi dwoma â€” wybierz komendÄ™
    <span class="inlinecode"><span class="id" title="keyword">Time</span></span>, gdyÅ¼ komendy zachowujÄ… siÄ™ zazwyczaj w sposÃ³b znacznie bardziej
    przewidywalny od taktyk. 
<div class="paragraph"> </div>

<a name="lab472"></a><h1 class="section">Konkluzja</h1>

<div class="paragraph"> </div>

 W niniejszym rozdziale zapoznaliÅ›my siÄ™ z potÄ™Å¼nÄ… maszyneriÄ…, dziÄ™ki
    ktÃ³rej moÅ¼emy zjeÅ›Ä‡ ciastko i mieÄ‡ ciastko: dziÄ™ki wÅ‚asnym taktykom
    jesteÅ›my w stanie poÅ‚Ä…czyÄ‡ CoqowÄ… peÅ‚niÄ™ formalnej poprawnoÅ›ci oraz
    typowy dla matematyki uprawianej nieformalnie luÅºny styl dowodzenia,
    w ktÃ³rym maÅ‚o interesujÄ…ce szczegÃ³Å‚y zostajÄ… pominiÄ™te. A wszystko to
    okraszone (wystarczajÄ…cÄ…, mam nadziejÄ™) szczyptÄ… zadaÅ„.

<div class="paragraph"> </div>

    Ale to jeszcze nie wszystko, gdyÅ¼ pÃ³ki co pominiÄ™te zostaÅ‚y konstrukty
    Ltaca pozwalajÄ…ce dopasowywaÄ‡ termy, dziÄ™ki ktÃ³rym jesteÅ›my w stanie
    np. napisaÄ‡ taktykÄ™, ktÃ³ra odrÃ³Å¼ni <span class="inlinecode">2</span> <span class="inlinecode">+</span> <span class="inlinecode">2</span> od <span class="inlinecode">4</span>. JeÅ¼eli odczuwasz
    niedosyt po przeczytaniu tego rozdziaÅ‚u, to uszy do gÃ³ry â€” zapoznamy
    siÄ™ z nimi juÅ¼ niedÅ‚ugo, przy omawianiu dowodu przez reflekcjÄ™. Zanim
    to jednak nastÄ…pi, zrobimy przeglÄ…d taktyk wbudowanych. 
</div>
<div class="code">
</div>
